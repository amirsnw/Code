/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
/*
  Created by: k_kaviani
  Revised by: a_amiri
*/
import { ChangeDetectorRef, Component, ElementRef, HostListener, Input, ViewChild } from '@angular/core';
import { TaminMenuModel } from '../../../models/tamin-menu.model';
import { Router } from '@angular/router';
import { TaminRestService } from '../../../services/tamin-rest-service/tamin-rest.service';
export class TaminSiteTopMenuComponent {
    /**
     * @param {?} taminRestService
     * @param {?} router
     * @param {?} ref
     */
    constructor(taminRestService, router, ref) {
        this.taminRestService = taminRestService;
        this.router = router;
        this.ref = ref;
        this.menuData = new TaminMenuModel();
        this.stack = [];
        this.dummy = true;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.taminRestService.getAll(this.restUrl)
            .then((/**
         * @param {?} data
         * @return {?}
         */
        data => {
            this.menuData = data.data;
            this.stack.push(data.data);
        }))
            .catch((/**
         * @param {?} error
         * @return {?}
         */
        error => {
        }));
    }
    /**
     * @param {?} item
     * @return {?}
     */
    handleMenu(item) {
        if (item.disable) {
            alertify.alert('پیام سیستم', 'این خدمت بزودی در اختیار کاربران محترم سازمان تامین اجتماعی قرار خواهد گرفت.');
            return;
        }
        if (item.url !== '') {
            if (item['url-type'] === 'external') {
                window.open(item.url);
            }
            this.router.navigateByUrl('/' + item.url);
            this.dummy = false;
            this.ref.detectChanges();
            this.dummy = true;
            this.ref.detectChanges();
        }
    }
    /**
     * @return {?}
     */
    toggleMobileMenu() {
        if (this.mobileMenuBody.nativeElement.style.display === 'block') {
            this.mobileMenuBody.nativeElement.style.display = 'none';
            this.mobileMenuButton.nativeElement.style.background = '#000a';
            this.mobileMenuButton.nativeElement.style.color = 'white';
        }
        else {
            this.mobileMenuBody.nativeElement.style.display = 'block';
            /** @type {?} */
            const rect = window.document.body.getBoundingClientRect();
            this.mobileMenuBody.nativeElement.style.width = rect.width + 'px';
            this.mobileMenuButton.nativeElement.style.background = '#00779caa';
            this.mobileMenuButton.nativeElement.style.color = 'white';
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    windowResizeHandler(event) {
        /** @type {?} */
        const rect = window.document.body.getBoundingClientRect();
        this.mobileMenuBody.nativeElement.style.width = rect.width + 'px';
    }
    /**
     * @param {?} menuItem
     * @return {?}
     */
    onMobileMenuItemClick(menuItem) {
        if (menuItem.items !== undefined && menuItem.items.length !== 0) {
            this.stack.push(menuItem);
        }
    }
    /**
     * @return {?}
     */
    onMobileMenuReturn() {
        this.stack.pop();
    }
}
TaminSiteTopMenuComponent.decorators = [
    { type: Component, args: [{
                selector: 'tamin-site-top-menu',
                template: "<!--\n  Created by: k_kaviani\n  Revised by: a_amiri\n-->\n<nav class=\"desktop\" *ngIf=\"dummy\">\n  <ul>\n    <li *ngFor=\"let item1 of menuData.items\">\n      <a (click)=\"handleMenu(item1)\" [ngClass]=\"{'disable':item1.disable}\">{{item1.caption}}</a>\n      <ul *ngIf=\"item1.items !== undefined\" class=\"child\">\n        <li *ngFor=\"let item2 of item1.items\">\n          <a (click)=\"handleMenu(item2)\" [ngClass]=\"{'hasSubItem':item2.items !== undefined, 'disable':item2.disable}\">{{item2.caption}}</a>\n          <ul *ngIf=\"item2.items !== undefined\" class=\"child\">\n            <li *ngFor=\"let item3 of item2.items\" [ngClass]=\"{'disable':item3.disable}\">\n              <a (click)=\"handleMenu(item3)\">{{item3.caption}}</a>\n            </li>\n          </ul>\n        </li>\n      </ul>\n    </li>\n  </ul>\n</nav>\n\n<nav class=\"mobile\" *ngIf=\"dummy\">\n  <ul>\n    <li>\n      <a (click)=\"toggleMobileMenu()\" #mobileMenuButton style=\"border-radius:0\"><i class=\"icon-menu\"></i></a>\n      <ul class=\"child\" #mobileMenuBody>\n        <li *ngIf=\"stack.length !== 1\"><a (click)=\"onMobileMenuReturn()\"><i class=\"icon-right-open\"\n                                                                            style=\"margin-left: 5px\"></i>\u0628\u0627\u0632\u06AF\u0634\u062A</a></li>\n        <li *ngFor=\"let item of stack[stack.length-1]?.items\" (click)=\"onMobileMenuItemClick(item)\">\n          <a (click)=\"handleMenu(item)\">{{item.caption}}</a></li>\n      </ul>\n    </li>\n  </ul>\n</nav>\n",
                styles: [".disable{background-color:rgba(119,119,119,.67)}nav.desktop{text-align:right;width:100%;position:static}nav.desktop a{margin:0;background-color:transparent;cursor:pointer}nav.desktop ul li:hover>ul{display:block}nav.desktop ul{background:rgba(173,173,173,.6);border:1px solid #0009;list-style:none;position:relative;z-index:1000}nav.desktop ul:after{content:\"\";clear:both;display:block}nav.desktop ul li{float:right;position:relative;font-weight:700}nav.desktop ul li:hover{background:rgba(0,0,0,.67)}nav.desktop ul li:hover a{color:#fff}nav.desktop ul li a{display:block;padding:10px 15px;color:#333;text-decoration:none}nav.desktop ul ul{display:none;background:rgba(0,0,0,.67);border-radius:0;padding:0;position:absolute;top:100%;right:0;min-width:300px}nav.desktop ul ul li{float:none;position:relative}nav.desktop ul ul li a{padding:10px 15px;color:#fff}nav.desktop a.hasSubItem:after{font-family:fontello;content:'\\e804';float:left;margin-top:4px}nav.desktop ul ul li a:hover{background:rgba(44,123,175,.67)}nav.desktop ul ul ul{position:absolute;right:100%;top:0}nav.mobile{text-align:right;width:100%;display:none}nav.mobile a{margin:0;background-color:transparent;cursor:pointer}nav.mobile ul{background:rgba(51,64,75,.6);border:1px solid #555;list-style:none;position:relative;z-index:1000}nav.mobile ul:after{content:\"\";clear:both;display:block}nav.mobile ul li{float:right;position:relative;font-weight:700}nav.mobile ul li a{display:block;padding:10px 15px;color:#fff;text-decoration:none}nav.mobile ul ul{display:none;background:rgba(0,0,0,.85);border-radius:0;padding:0;position:absolute;top:100%;right:0}nav.mobile ul ul li{float:none;position:relative}nav.mobile ul ul li a{padding:10px 15px;color:#fff}nav.mobile a.hasSubItem:after{font-family:fontello;content:'\\e804';float:left;margin-top:4px}nav.mobile ul ul li a:hover{background:rgba(255,255,255,.33)}nav.mobile ul ul ul{position:absolute;right:100%;top:0}@media screen and (max-width:767px),(orientation:portrait){nav.desktop{display:none}nav.mobile{display:block}}"]
            }] }
];
/** @nocollapse */
TaminSiteTopMenuComponent.ctorParameters = () => [
    { type: TaminRestService },
    { type: Router },
    { type: ChangeDetectorRef }
];
TaminSiteTopMenuComponent.propDecorators = {
    desktopMenu: [{ type: ViewChild, args: ['desktopMenu',] }],
    mobileMenu: [{ type: ViewChild, args: ['mobileMenu',] }],
    topMenu: [{ type: ViewChild, args: ['topMenu',] }],
    menuElement: [{ type: ViewChild, args: ['menuElement',] }],
    mobileMenuBody: [{ type: ViewChild, args: ['mobileMenuBody',] }],
    mobileMenuButton: [{ type: ViewChild, args: ['mobileMenuButton',] }],
    restUrl: [{ type: Input }],
    windowResizeHandler: [{ type: HostListener, args: ['window:resize', ['$event'],] }]
};
if (false) {
    /** @type {?} */
    TaminSiteTopMenuComponent.prototype.desktopMenu;
    /** @type {?} */
    TaminSiteTopMenuComponent.prototype.mobileMenu;
    /** @type {?} */
    TaminSiteTopMenuComponent.prototype.topMenu;
    /** @type {?} */
    TaminSiteTopMenuComponent.prototype.menuElement;
    /** @type {?} */
    TaminSiteTopMenuComponent.prototype.mobileMenuBody;
    /** @type {?} */
    TaminSiteTopMenuComponent.prototype.mobileMenuButton;
    /** @type {?} */
    TaminSiteTopMenuComponent.prototype.restUrl;
    /** @type {?} */
    TaminSiteTopMenuComponent.prototype.menuData;
    /** @type {?} */
    TaminSiteTopMenuComponent.prototype.stack;
    /** @type {?} */
    TaminSiteTopMenuComponent.prototype.dummy;
    /**
     * @type {?}
     * @private
     */
    TaminSiteTopMenuComponent.prototype.taminRestService;
    /**
     * @type {?}
     * @private
     */
    TaminSiteTopMenuComponent.prototype.router;
    /**
     * @type {?}
     * @private
     */
    TaminSiteTopMenuComponent.prototype.ref;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFtaW4tc2l0ZS10b3AtbWVudS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly90YW1pbi1mcmFtZXdvcmsvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy90YW1pbi1zaXRlL3RhbWluLXNpdGUtdG9wLW1lbnUvdGFtaW4tc2l0ZS10b3AtbWVudS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFLQSxPQUFPLEVBQUMsaUJBQWlCLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFVLFNBQVMsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUMvRyxPQUFPLEVBQUMsY0FBYyxFQUFDLE1BQU0sa0NBQWtDLENBQUM7QUFFaEUsT0FBTyxFQUFDLE1BQU0sRUFBQyxNQUFNLGlCQUFpQixDQUFDO0FBQ3ZDLE9BQU8sRUFBQyxnQkFBZ0IsRUFBQyxNQUFNLHlEQUF5RCxDQUFDO0FBU3pGLE1BQU0sT0FBTyx5QkFBeUI7Ozs7OztJQVlwQyxZQUFvQixnQkFBa0MsRUFBVSxNQUFjLEVBQVUsR0FBc0I7UUFBMUYscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtRQUFVLFdBQU0sR0FBTixNQUFNLENBQVE7UUFBVSxRQUFHLEdBQUgsR0FBRyxDQUFtQjtRQUp2RyxhQUFRLEdBQW1CLElBQUksY0FBYyxFQUFFLENBQUM7UUFDdkQsVUFBSyxHQUEwQixFQUFFLENBQUM7UUFDbEMsVUFBSyxHQUFHLElBQUksQ0FBQztJQUdiLENBQUM7Ozs7SUFFRCxRQUFRO1FBQ04sSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO2FBQ3ZDLElBQUk7Ozs7UUFBQyxJQUFJLENBQUMsRUFBRTtZQUNYLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQztZQUMxQixJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7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Q3ZCLFNBQVMsU0FBQyxZQUFZO3NCQUN0QixTQUFTLFNBQUMsU0FBUzswQkFDbkIsU0FBUyxTQUFDLGFBQWE7NkJBQ3ZCLFNBQVMsU0FBQyxnQkFBZ0I7K0JBQzFCLFNBQVMsU0FBQyxrQkFBa0I7c0JBQzVCLEtBQUs7a0NBaURMLFlBQVksU0FBQyxlQUFlLEVBQUUsQ0FBQyxRQUFRLENBQUM7Ozs7SUF2RHpDLGdEQUFrRDs7SUFDbEQsK0NBQWdEOztJQUNoRCw0Q0FBMEM7O0lBQzFDLGdEQUFrRDs7SUFDbEQsbURBQXdEOztJQUN4RCxxREFBNEQ7O0lBQzVELDRDQUF5Qjs7SUFDekIsNkNBQXVEOztJQUN2RCwwQ0FBa0M7O0lBQ2xDLDBDQUFhOzs7OztJQUVELHFEQUEwQzs7Ozs7SUFBRSwyQ0FBc0I7Ozs7O0lBQUUsd0NBQThCIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiAgQ3JlYXRlZCBieToga19rYXZpYW5pXG4gIFJldmlzZWQgYnk6IGFfYW1pcmlcbiovXG5cbmltcG9ydCB7Q2hhbmdlRGV0ZWN0b3JSZWYsIENvbXBvbmVudCwgRWxlbWVudFJlZiwgSG9zdExpc3RlbmVyLCBJbnB1dCwgT25Jbml0LCBWaWV3Q2hpbGR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtUYW1pbk1lbnVNb2RlbH0gZnJvbSAnLi4vLi4vLi4vbW9kZWxzL3RhbWluLW1lbnUubW9kZWwnO1xuaW1wb3J0IHtHZW5lcmljUmVzdFNlcnZpY2V9IGZyb20gJy4uLy4uLy4uL3NlcnZpY2VzL2dlbmVyaWMtcmVzdC1zZXJ2aWNlL2dlbmVyaWMtcmVzdC5zZXJ2aWNlJztcbmltcG9ydCB7Um91dGVyfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHtUYW1pblJlc3RTZXJ2aWNlfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy90YW1pbi1yZXN0LXNlcnZpY2UvdGFtaW4tcmVzdC5zZXJ2aWNlJztcblxuZGVjbGFyZSB2YXIgYWxlcnRpZnk6IGFueTtcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndGFtaW4tc2l0ZS10b3AtbWVudScsXG4gIHRlbXBsYXRlVXJsOiAnLi90YW1pbi1zaXRlLXRvcC1tZW51LmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vdGFtaW4tc2l0ZS10b3AtbWVudS5jb21wb25lbnQuc2NzcyddXG59KVxuZXhwb3J0IGNsYXNzIFRhbWluU2l0ZVRvcE1lbnVDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBAVmlld0NoaWxkKCdkZXNrdG9wTWVudScpIGRlc2t0b3BNZW51OiBFbGVtZW50UmVmO1xuICBAVmlld0NoaWxkKCdtb2JpbGVNZW51JykgbW9iaWxlTWVudTogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZCgndG9wTWVudScpIHRvcE1lbnU6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ21lbnVFbGVtZW50JykgbWVudUVsZW1lbnQ6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ21vYmlsZU1lbnVCb2R5JykgbW9iaWxlTWVudUJvZHk6IEVsZW1lbnRSZWY7XG4gIEBWaWV3Q2hpbGQoJ21vYmlsZU1lbnVCdXR0b24nKSBtb2JpbGVNZW51QnV0dG9uOiBFbGVtZW50UmVmO1xuICBASW5wdXQoKSByZXN0VXJsOiBzdHJpbmc7XG4gIHB1YmxpYyBtZW51RGF0YTogVGFtaW5NZW51TW9kZWwgPSBuZXcgVGFtaW5NZW51TW9kZWwoKTtcbiAgc3RhY2s6IEFycmF5PFRhbWluTWVudU1vZGVsPiA9IFtdO1xuICBkdW1teSA9IHRydWU7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSB0YW1pblJlc3RTZXJ2aWNlOiBUYW1pblJlc3RTZXJ2aWNlLCBwcml2YXRlIHJvdXRlcjogUm91dGVyLCBwcml2YXRlIHJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYpIHtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMudGFtaW5SZXN0U2VydmljZS5nZXRBbGwodGhpcy5yZXN0VXJsKVxuICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgIHRoaXMubWVudURhdGEgPSBkYXRhLmRhdGE7XG4gICAgICAgIHRoaXMuc3RhY2sucHVzaChkYXRhLmRhdGEpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgICB9KTtcbiAgfVxuXG4gIGhhbmRsZU1lbnUoaXRlbTogVGFtaW5NZW51TW9kZWwpIHtcbiAgICBpZiAoaXRlbS5kaXNhYmxlKSB7XG4gICAgICBhbGVydGlmeS5hbGVydCgn2b7bjNin2YUg2LPbjNiz2KrZhScsICfYp9uM2YYg2K7Yr9mF2Kog2KjYstmI2K/bjCDYr9ixINin2K7YqtuM2KfYsSDaqdin2LHYqNix2KfZhiDZhdit2KrYsdmFINiz2KfYstmF2KfZhiDYqtin2YXbjNmGINin2KzYqtmF2KfYuduMINmC2LHYp9ixINiu2YjYp9mH2K8g2q/YsdmB2KouJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChpdGVtLnVybCAhPT0gJycpIHtcbiAgICAgIGlmIChpdGVtWyd1cmwtdHlwZSddID09PSAnZXh0ZXJuYWwnKSB7XG4gICAgICAgIHdpbmRvdy5vcGVuKGl0ZW0udXJsKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlQnlVcmwoJy8nICsgaXRlbS51cmwpO1xuICAgICAgdGhpcy5kdW1teSA9IGZhbHNlO1xuICAgICAgdGhpcy5yZWYuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgdGhpcy5kdW1teSA9IHRydWU7XG4gICAgICB0aGlzLnJlZi5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgfVxuICB9XG5cbiAgdG9nZ2xlTW9iaWxlTWVudSgpIHtcbiAgICBpZiAodGhpcy5tb2JpbGVNZW51Qm9keS5uYXRpdmVFbGVtZW50LnN0eWxlLmRpc3BsYXkgPT09ICdibG9jaycpIHtcbiAgICAgIHRoaXMubW9iaWxlTWVudUJvZHkubmF0aXZlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgdGhpcy5tb2JpbGVNZW51QnV0dG9uLm5hdGl2ZUVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZCA9ICcjMDAwYSc7XG4gICAgICB0aGlzLm1vYmlsZU1lbnVCdXR0b24ubmF0aXZlRWxlbWVudC5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMubW9iaWxlTWVudUJvZHkubmF0aXZlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgIGNvbnN0IHJlY3QgPSB3aW5kb3cuZG9jdW1lbnQuYm9keS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHRoaXMubW9iaWxlTWVudUJvZHkubmF0aXZlRWxlbWVudC5zdHlsZS53aWR0aCA9IHJlY3Qud2lkdGggKyAncHgnO1xuICAgICAgdGhpcy5tb2JpbGVNZW51QnV0dG9uLm5hdGl2ZUVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZCA9ICcjMDA3NzljYWEnO1xuICAgICAgdGhpcy5tb2JpbGVNZW51QnV0dG9uLm5hdGl2ZUVsZW1lbnQuc3R5bGUuY29sb3IgPSAnd2hpdGUnO1xuICAgIH1cbiAgfVxuXG4gIEBIb3N0TGlzdGVuZXIoJ3dpbmRvdzpyZXNpemUnLCBbJyRldmVudCddKVxuICB3aW5kb3dSZXNpemVIYW5kbGVyKGV2ZW50KSB7XG4gICAgY29uc3QgcmVjdCA9IHdpbmRvdy5kb2N1bWVudC5ib2R5LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHRoaXMubW9iaWxlTWVudUJvZHkubmF0aXZlRWxlbWVudC5zdHlsZS53aWR0aCA9IHJlY3Qud2lkdGggKyAncHgnO1xuICB9XG5cbiAgb25Nb2JpbGVNZW51SXRlbUNsaWNrKG1lbnVJdGVtKSB7XG4gICAgaWYgKG1lbnVJdGVtLml0ZW1zICE9PSB1bmRlZmluZWQgJiYgbWVudUl0ZW0uaXRlbXMubGVuZ3RoICE9PSAwKSB7XG4gICAgICB0aGlzLnN0YWNrLnB1c2gobWVudUl0ZW0pO1xuICAgIH1cbiAgfVxuXG4gIG9uTW9iaWxlTWVudVJldHVybigpIHtcbiAgICB0aGlzLnN0YWNrLnBvcCgpO1xuICB9XG59XG4iXX0=