/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ElementRef, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { OverlayService } from '../../services/overlay/overlay.service';
var TaminModalComponent = /** @class */ (function () {
    function TaminModalComponent(overlayService) {
        this.overlayService = overlayService;
        this.width = '80%';
        this._overlay = null;
        this.buttonClicked = new EventEmitter();
        this.alertifyRef = null;
    }
    /**
     * @return {?}
     */
    TaminModalComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.createDialog();
    };
    /**
     * @return {?}
     */
    TaminModalComponent.prototype.show = /**
     * @return {?}
     */
    function () {
        if (this.alertifyRef) {
            this.alertifyRef.destroy();
            this.alertifyRef = null;
        }
        // self = this.modal.open();
        if (this.title === '') {
            this.title = ' ';
        }
        this.modalElement.nativeElement.style.display = 'block';
        this.alertifyRef = alertify.genericDialog(this.modalElement.nativeElement, this.title, this.width, this.maximizable);
    };
    /**
     * @return {?}
     */
    TaminModalComponent.prototype.showOverlay = /**
     * @return {?}
     */
    function () {
        if (this.alertifyRef === null) {
            return;
        }
        if (this._overlay) {
            return;
        }
        this._overlay = this.overlayService.show(this.alertifyRef.elements.dialog);
    };
    /**
     * @return {?}
     */
    TaminModalComponent.prototype.hideOverlay = /**
     * @return {?}
     */
    function () {
        if (this.alertifyRef === null) {
            return;
        }
        if (!this._overlay) {
            return;
        }
        this.overlayService.hide(this._overlay);
    };
    /**
     * @return {?}
     */
    TaminModalComponent.prototype.hide = /**
     * @return {?}
     */
    function () {
        if (this.alertifyRef === null) {
            return;
        }
        this.alertifyRef.destroy();
        this.alertifyRef = null;
    };
    /**
     * @return {?}
     */
    TaminModalComponent.prototype.createDialog = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var me = this;
        if (!alertify.genericDialog) {
            /** @type {?} */
            var buttons_1 = [];
            if (this.button1) {
                buttons_1.push(this.button1);
            }
            if (this.button2) {
                buttons_1.push(this.button2);
            }
            if (this.button3) {
                buttons_1.push(this.button3);
            }
            alertify.dialog('genericDialog', (/**
             * @return {?}
             */
            function () {
                return {
                    main: (/**
                     * @param {?} content
                     * @param {?} title
                     * @param {?} width
                     * @param {?} maximizable
                     * @return {?}
                     */
                    function (content, title, width, maximizable) {
                        this.setting('title', title);
                        this.setting('width', width);
                        this.setting('maximizable', maximizable);
                        this.setContent(content);
                    }),
                    setup: (/**
                     * @return {?}
                     */
                    function () {
                        return {
                            buttons: buttons_1,
                            options: {
                                resizable: false,
                                padding: false,
                                frameless: false,
                                autoReset: false,
                                closableByDimmer: false
                            }
                        };
                    }),
                    callback: (/**
                     * @param {?} closeEvent
                     * @return {?}
                     */
                    function (closeEvent) {
                        me.buttonClicked.emit(closeEvent);
                    }),
                    settings: {
                        width: '',
                        onClose: undefined
                    },
                    hooks: {
                        onrestore: (/**
                         * @return {?}
                         */
                        function () {
                            this.elements.dialog.style.width = this.get('width');
                        }),
                        onshow: (/**
                         * @return {?}
                         */
                        function () {
                            this.elements.dialog.style.maxWidth = 'none';
                            this.elements.dialog.style.width = this.get('width');
                        })
                    }
                };
            }));
        }
    };
    TaminModalComponent.decorators = [
        { type: Component, args: [{
                    selector: 'tamin-modal',
                    template: "<div #modalElement style=\"display: none;padding: 20px\">\n  <ng-content>\n  </ng-content>\n</div>\n\n",
                    styles: [".modal-content{background-color:#fefefe;margin:auto;border:1px solid #888;width:80%;box-shadow:0 4px 8px 0 rgba(0,0,0,.2),0 6px 20px 0 rgba(0,0,0,.19);-webkit-animation-name:animatetop;-webkit-animation-duration:.4s;animation-name:animatetop;animation-duration:.4s}@-webkit-keyframes animatetop{from{top:-300px;opacity:0}to{top:0;opacity:1}}@keyframes animatetop{from{top:-300px;opacity:0}to{top:0;opacity:1}}.close{color:#fff;float:left;font-size:28px;font-weight:700}.title{color:#fff;float:right;margin-top:4px;font-size:16px;font-weight:700;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}.close:focus,.close:hover{color:#000;text-decoration:none;cursor:pointer}.modal-header{padding:2px 16px;background-color:#6c63fe;color:#fff;min-height:40px}.modal-body{padding:10px}.modal-footer{padding:2px 16px;background-color:#6c63fe;color:#fff}"]
                }] }
    ];
    /** @nocollapse */
    TaminModalComponent.ctorParameters = function () { return [
        { type: OverlayService }
    ]; };
    TaminModalComponent.propDecorators = {
        modalElement: [{ type: ViewChild, args: ['modalElement',] }],
        title: [{ type: Input }],
        width: [{ type: Input }],
        maximizable: [{ type: Input }],
        buttonClicked: [{ type: Output }]
    };
    return TaminModalComponent;
}());
export { TaminModalComponent };
if (false) {
    /** @type {?} */
    TaminModalComponent.prototype.modalElement;
    /** @type {?} */
    TaminModalComponent.prototype.title;
    /** @type {?} */
    TaminModalComponent.prototype.width;
    /** @type {?} */
    TaminModalComponent.prototype.maximizable;
    /** @type {?} */
    TaminModalComponent.prototype.button1;
    /** @type {?} */
    TaminModalComponent.prototype.button2;
    /** @type {?} */
    TaminModalComponent.prototype.button3;
    /** @type {?} */
    TaminModalComponent.prototype.modal;
    /** @type {?} */
    TaminModalComponent.prototype.draggable;
    /** @type {?} */
    TaminModalComponent.prototype.self;
    /**
     * @type {?}
     * @private
     */
    TaminModalComponent.prototype._overlay;
    /** @type {?} */
    TaminModalComponent.prototype.buttonClicked;
    /**
     * @type {?}
     * @private
     */
    TaminModalComponent.prototype.alertifyRef;
    /**
     * @type {?}
     * @private
     */
    TaminModalComponent.prototype.overlayService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFtaW4tbW9kYWwuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vdGFtaW4tZnJhbWV3b3JrLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvdGFtaW4tbW9kYWwvdGFtaW4tbW9kYWwuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUMsU0FBUyxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFVLE1BQU0sRUFBRSxTQUFTLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDcEcsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLHdDQUF3QyxDQUFDO0FBT3RFO0lBc0JFLDZCQUFvQixjQUE4QjtRQUE5QixtQkFBYyxHQUFkLGNBQWMsQ0FBZ0I7UUFkekMsVUFBSyxHQUFHLEtBQUssQ0FBQztRQVFmLGFBQVEsR0FBRyxJQUFJLENBQUM7UUFDZCxrQkFBYSxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFHMUMsZ0JBQVcsR0FBRyxJQUFJLENBQUM7SUFHM0IsQ0FBQzs7OztJQUVELHNDQUFROzs7SUFBUjtRQUNFLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztJQUN0QixDQUFDOzs7O0lBRUQsa0NBQUk7OztJQUFKO1FBQ0UsSUFBSSxJQUFJLENBQUMsV0FBVyxFQUFFO1lBQ3BCLElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDM0IsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUM7U0FDekI7UUFDRCw0QkFBNEI7UUFDNUIsSUFBSSxJQUFJLENBQUMsS0FBSyxLQUFLLEVBQUUsRUFBRTtZQUNyQixJQUFJLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQztTQUNsQjtRQUNELElBQUksQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1FBQ3hELElBQUksQ0FBQyxXQUFXLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMs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VCxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7d0JBQ3ZELENBQUMsQ0FBQTt3QkFDRCxNQUFNOzs7d0JBQUU7NEJBQ04sSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUM7NEJBQzdDLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQzt3QkFDdkQsQ0FBQyxDQUFBO3FCQUNGO2lCQUNGLENBQUM7WUFDSixDQUFDLEVBQUMsQ0FBQztTQUNKO0lBQ0gsQ0FBQzs7Z0JBOUhGLFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUsYUFBYTtvQkFDdkIsa0hBQTJDOztpQkFFNUM7Ozs7Z0JBWE8sY0FBYzs7OytCQWFuQixTQUFTLFNBQUMsY0FBYzt3QkFDeEIsS0FBSzt3QkFDTCxLQUFLOzhCQUNMLEtBQUs7Z0NBUUwsTUFBTTs7SUE4R1QsMEJBQUM7Q0FBQSxBQS9IRCxJQStIQztTQTFIWSxtQkFBbUI7OztJQUM5QiwyQ0FBb0Q7O0lBQ3BELG9DQUF1Qjs7SUFDdkIsb0NBQXVCOztJQUN2QiwwQ0FBMkI7O0lBQzNCLHNDQUFhOztJQUNiLHNDQUFhOztJQUNiLHNDQUFhOztJQUNiLG9DQUFXOztJQUNYLHdDQUFlOztJQUNmLG1DQUFVOzs7OztJQUNWLHVDQUF3Qjs7SUFDeEIsNENBQWtEOzs7OztJQUdsRCwwQ0FBMkI7Ozs7O0lBRWYsNkNBQXNDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtDb21wb25lbnQsIEVsZW1lbnRSZWYsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uSW5pdCwgT3V0cHV0LCBWaWV3Q2hpbGR9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtPdmVybGF5U2VydmljZX0gZnJvbSAnLi4vLi4vc2VydmljZXMvb3ZlcmxheS9vdmVybGF5LnNlcnZpY2UnO1xuXG5kZWNsYXJlIGxldCBQbGFpbk1vZGFsOiBhbnk7XG5kZWNsYXJlIGxldCBQbGFpbkRyYWdnYWJsZTogYW55O1xuXG5kZWNsYXJlIHZhciBhbGVydGlmeTogYW55O1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd0YW1pbi1tb2RhbCcsXG4gIHRlbXBsYXRlVXJsOiAnLi90YW1pbi1tb2RhbC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL3RhbWluLW1vZGFsLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgVGFtaW5Nb2RhbENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIEBWaWV3Q2hpbGQoJ21vZGFsRWxlbWVudCcpIG1vZGFsRWxlbWVudDogRWxlbWVudFJlZjtcbiAgQElucHV0KCkgdGl0bGU6IHN0cmluZztcbiAgQElucHV0KCkgd2lkdGggPSAnODAlJztcbiAgQElucHV0KCkgbWF4aW1pemFibGU6IHRydWU7XG4gIGJ1dHRvbjE6IGFueTtcbiAgYnV0dG9uMjogYW55O1xuICBidXR0b24zOiBhbnk7XG4gIG1vZGFsOiBhbnk7XG4gIGRyYWdnYWJsZTogYW55O1xuICBzZWxmOiBhbnk7XG4gIHByaXZhdGUgX292ZXJsYXkgPSBudWxsO1xuICBAT3V0cHV0KCkgYnV0dG9uQ2xpY2tlZCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG5cbiAgcHJpdmF0ZSBhbGVydGlmeVJlZiA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBvdmVybGF5U2VydmljZTogT3ZlcmxheVNlcnZpY2UpIHtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMuY3JlYXRlRGlhbG9nKCk7XG4gIH1cblxuICBzaG93KCkge1xuICAgIGlmICh0aGlzLmFsZXJ0aWZ5UmVmKSB7XG4gICAgICB0aGlzLmFsZXJ0aWZ5UmVmLmRlc3Ryb3koKTtcbiAgICAgIHRoaXMuYWxlcnRpZnlSZWYgPSBudWxsO1xuICAgIH1cbiAgICAvLyBzZWxmID0gdGhpcy5tb2RhbC5vcGVuKCk7XG4gICAgaWYgKHRoaXMudGl0bGUgPT09ICcnKSB7XG4gICAgICB0aGlzLnRpdGxlID0gJyAnO1xuICAgIH1cbiAgICB0aGlzLm1vZGFsRWxlbWVudC5uYXRpdmVFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIHRoaXMuYWxlcnRpZnlSZWYgPSBhbGVydGlmeS5nZW5lcmljRGlhbG9nKHRoaXMubW9kYWxFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsIHRoaXMudGl0bGUsIHRoaXMud2lkdGgsIHRoaXMubWF4aW1pemFibGUpO1xuICB9XG5cbiAgc2hvd092ZXJsYXkoKSB7XG4gICAgaWYgKHRoaXMuYWxlcnRpZnlSZWYgPT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuX292ZXJsYXkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9vdmVybGF5ID0gdGhpcy5vdmVybGF5U2VydmljZS5zaG93KHRoaXMuYWxlcnRpZnlSZWYuZWxlbWVudHMuZGlhbG9nKTtcbiAgfVxuXG4gIGhpZGVPdmVybGF5KCkge1xuICAgIGlmICh0aGlzLmFsZXJ0aWZ5UmVmID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9vdmVybGF5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5vdmVybGF5U2VydmljZS5oaWRlKHRoaXMuX292ZXJsYXkpO1xuICB9XG5cblxuICBoaWRlKCkge1xuICAgIGlmICh0aGlzLmFsZXJ0aWZ5UmVmID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuYWxlcnRpZnlSZWYuZGVzdHJveSgpO1xuICAgIHRoaXMuYWxlcnRpZnlSZWYgPSBudWxsO1xuICB9XG5cbiAgY3JlYXRlRGlhbG9nKCkge1xuICAgIGNvbnN0IG1lID0gdGhpcztcbiAgICBpZiAoIWFsZXJ0aWZ5LmdlbmVyaWNEaWFsb2cpIHtcbiAgICAgIGNvbnN0IGJ1dHRvbnMgPSBbXTtcbiAgICAgIGlmICh0aGlzLmJ1dHRvbjEpIHtcbiAgICAgICAgYnV0dG9ucy5wdXNoKHRoaXMuYnV0dG9uMSk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5idXR0b24yKSB7XG4gICAgICAgIGJ1dHRvbnMucHVzaCh0aGlzLmJ1dHRvbjIpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYnV0dG9uMykge1xuICAgICAgICBidXR0b25zLnB1c2godGhpcy5idXR0b24zKTtcbiAgICAgIH1cbiAgICAgIGFsZXJ0aWZ5LmRpYWxvZygnZ2VuZXJpY0RpYWxvZycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBtYWluOiBmdW5jdGlvbiAoY29udGVudCwgdGl0bGUsIHdpZHRoLCBtYXhpbWl6YWJsZSkge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5nKCd0aXRsZScsIHRpdGxlKTtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZygnd2lkdGgnLCB3aWR0aCk7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmcoJ21heGltaXphYmxlJywgbWF4aW1pemFibGUpO1xuICAgICAgICAgICAgdGhpcy5zZXRDb250ZW50KGNvbnRlbnQpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgc2V0dXA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGJ1dHRvbnM6IGJ1dHRvbnMsXG4gICAgICAgICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICByZXNpemFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHBhZGRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGZyYW1lbGVzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgYXV0b1Jlc2V0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjbG9zYWJsZUJ5RGltbWVyOiBmYWxzZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChjbG9zZUV2ZW50KSB7XG4gICAgICAgICAgICBtZS5idXR0b25DbGlja2VkLmVtaXQoY2xvc2VFdmVudCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgd2lkdGg6ICcnLFxuICAgICAgICAgICAgb25DbG9zZTogdW5kZWZpbmVkXG4gICAgICAgICAgfSxcbiAgICAgICAgICBob29rczoge1xuICAgICAgICAgICAgb25yZXN0b3JlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHRoaXMuZWxlbWVudHMuZGlhbG9nLnN0eWxlLndpZHRoID0gdGhpcy5nZXQoJ3dpZHRoJyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25zaG93OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHRoaXMuZWxlbWVudHMuZGlhbG9nLnN0eWxlLm1heFdpZHRoID0gJ25vbmUnO1xuICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRzLmRpYWxvZy5zdHlsZS53aWR0aCA9IHRoaXMuZ2V0KCd3aWR0aCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuIl19