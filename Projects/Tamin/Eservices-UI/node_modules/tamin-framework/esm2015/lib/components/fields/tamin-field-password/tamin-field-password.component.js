/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ElementRef, forwardRef, Input, ViewChild } from '@angular/core';
import { NG_VALUE_ACCESSOR } from '@angular/forms';
import { FieldBaseComponent } from '../../../base/field-base.component';
import { fromEvent } from 'rxjs';
export class TaminFieldPasswordComponent extends FieldBaseComponent {
    constructor() {
        super(...arguments);
        this.showPasswordMeter = false;
        this.complexity = '';
        this.score = '';
        // initPwdChk() {
        // this.scorebar.nativeElement.style.backgroundPosition = '0';
        // }
    }
    /**
     * @return {?}
     */
    initializeComponent() {
        setTimeout((/**
         * @return {?}
         */
        () => {
            /** @type {?} */
            const keyups = fromEvent(this.inputElement.nativeElement, 'keyup');
            this.subscription.add(keyups.subscribe((/**
             * @param {?} evt
             * @return {?}
             */
            (evt) => {
                if (this.showPasswordMeter) {
                    this.checkPassword(evt.target.value);
                }
            })));
        }), 0);
    }
    /**
     * @param {?} pwd
     * @return {?}
     */
    checkPassword(pwd) {
        this.color = 'white';
        this.complexity = '';
        this.score = '';
        if (pwd.trim().length === 0) {
            return;
        }
        /** @type {?} */
        let nScore = 0;
        /** @type {?} */
        let nLength = 0;
        /** @type {?} */
        let nAlphaUC = 0;
        /** @type {?} */
        let nAlphaLC = 0;
        /** @type {?} */
        let nNumber = 0;
        /** @type {?} */
        let nSymbol = 0;
        /** @type {?} */
        let nMidChar = 0;
        /** @type {?} */
        let nRequirements = 0;
        /** @type {?} */
        let nAlphasOnly = 0;
        /** @type {?} */
        let nNumbersOnly = 0;
        /** @type {?} */
        let nUnqChar = 0;
        /** @type {?} */
        let nRepChar = 0;
        /** @type {?} */
        let nRepInc = 0;
        /** @type {?} */
        let nConsecAlphaUC = 0;
        /** @type {?} */
        let nConsecAlphaLC = 0;
        /** @type {?} */
        let nConsecNumber = 0;
        /** @type {?} */
        let nConsecSymbol = 0;
        /** @type {?} */
        let nConsecCharType = 0;
        /** @type {?} */
        let nSeqAlpha = 0;
        /** @type {?} */
        let nSeqNumber = 0;
        /** @type {?} */
        let nSeqSymbol = 0;
        /** @type {?} */
        let nSeqChar = 0;
        /** @type {?} */
        let nReqChar = 0;
        // nMultConsecCharType = 0;
        // const nMultRepChar = 1, nMultConsecSymbol = 1;
        /** @type {?} */
        const nMultMidChar = 2;
        /** @type {?} */
        const 
        /*nMultRequirements = 2,*/
        nMultConsecAlphaUC = 2;
        /** @type {?} */
        const nMultConsecAlphaLC = 2;
        /** @type {?} */
        const nMultConsecNumber = 2;
        /** @type {?} */
        const nReqCharType = 3;
        /** @type {?} */
        const 
        /*nMultAlphaUC = 3,*/
        /*nMultAlphaLC = 3,*/
        nMultSeqAlpha = 3;
        /** @type {?} */
        const nMultSeqNumber = 3;
        /** @type {?} */
        const nMultSeqSymbol = 3;
        /** @type {?} */
        const nMultLength = 4;
        /** @type {?} */
        const nMultNumber = 4;
        /** @type {?} */
        const nMultSymbol = 6;
        /** @type {?} */
        let nTmpAlphaUC = '';
        /** @type {?} */
        let nTmpAlphaLC = '';
        /** @type {?} */
        let nTmpNumber = '';
        /** @type {?} */
        let nTmpSymbol = '';
        /** @type {?} */
        let sAlphaUC = '0';
        /** @type {?} */
        let sAlphaLC = '0';
        /** @type {?} */
        let sNumber = '0';
        /** @type {?} */
        let sSymbol = '0';
        /** @type {?} */
        let sMidChar = '0';
        /** @type {?} */
        let 
        // sRequirements = '0',
        sAlphasOnly = '0';
        /** @type {?} */
        let sNumbersOnly = '0';
        /** @type {?} */
        let sRepChar = '0';
        /** @type {?} */
        let sConsecAlphaUC = '0';
        /** @type {?} */
        let sConsecAlphaLC = '0';
        /** @type {?} */
        let sConsecNumber = '0';
        /** @type {?} */
        let sSeqAlpha = '0';
        /** @type {?} */
        let sSeqNumber = '0';
        /** @type {?} */
        let sSeqSymbol = '0';
        /** @type {?} */
        const sAlphas = 'abcdefghijklmnopqrstuvwxyz';
        /** @type {?} */
        const sNumerics = '01234567890';
        /** @type {?} */
        const sSymbols = ')!@#$%^&*()';
        /*let sComplexity = '';*/
        /** @type {?} */
        const sStandards = 'Below';
        /** @type {?} */
        const nMinPwdLen = 8;
        if (document.all) {
            /** @type {?} */
            const nd = 0;
        }
        else {
            /** @type {?} */
            const nd = 1;
        }
        if (pwd) {
            nScore = Number(pwd.length * nMultLength);
            nLength = pwd.length;
            /** @type {?} */
            const arrPwd = pwd.replace(/\s+/g, '').split(/\s*/);
            /** @type {?} */
            const arrPwdLen = arrPwd.length;
            for (let a = 0; a < arrPwdLen; a++) {
                if (arrPwd[a].match(/[A-Z]/g)) {
                    if (nTmpAlphaUC !== '') {
                        if (Number(nTmpAlphaUC + 1) === a) {
                            nConsecAlphaUC++;
                            nConsecCharType++;
                        }
                    }
                    nTmpAlphaUC = a.toString();
                    nAlphaUC++;
                }
                else if (arrPwd[a].match(/[a-z]/g)) {
                    if (nTmpAlphaLC !== '') {
                        if (Number(nTmpAlphaLC + 1) === a) {
                            nConsecAlphaLC++;
                            nConsecCharType++;
                        }
                    }
                    nTmpAlphaLC = a.toString();
                    nAlphaLC++;
                }
                else if (arrPwd[a].match(/[0-9]/g)) {
                    if (a > 0 && a < (arrPwdLen - 1)) {
                        nMidChar++;
                    }
                    if (nTmpNumber !== '') {
                        if (Number(nTmpNumber + 1) === a) {
                            nConsecNumber++;
                            nConsecCharType++;
                        }
                    }
                    nTmpNumber = a.toString();
                    nNumber++;
                }
                else if (arrPwd[a].match(/[^a-zA-Z0-9_]/g)) {
                    if (a > 0 && a < (arrPwdLen - 1)) {
                        nMidChar++;
                    }
                    if (nTmpSymbol !== '') {
                        if (Number(nTmpSymbol + 1) === a) {
                            nConsecSymbol++;
                            nConsecCharType++;
                        }
                    }
                    nTmpSymbol = a.toString();
                    nSymbol++;
                }
                /** @type {?} */
                let bCharExists = false;
                for (let b = 0; b < arrPwdLen; b++) {
                    if (arrPwd[a] === arrPwd[b] && a !== b) { /* repeat character exists */
                        bCharExists = true;
                        nRepInc += Math.abs(arrPwdLen / (b - a));
                    }
                }
                if (bCharExists) {
                    nRepChar++;
                    nUnqChar = arrPwdLen - nRepChar;
                    nRepInc = (nUnqChar) ? Math.ceil(nRepInc / nUnqChar) : Math.ceil(nRepInc);
                }
            }
            /* Check for sequential alpha string patterns (forward and reverse) */
            for (let s = 0; s < 23; s++) {
                /** @type {?} */
                const sFwd = sAlphas.substring(s, Number(s + 3));
                /** @type {?} */
                const sRev = this.strReverse(sFwd);
                if (pwd.toLowerCase().indexOf(sFwd) !== -1 || pwd.toLowerCase().indexOf(sRev) !== -1) {
                    nSeqAlpha++;
                    nSeqChar++;
                }
            }
            for (let s = 0; s < 8; s++) {
                /** @type {?} */
                const sFwd = sNumerics.substring(s, Number(s + 3));
                /** @type {?} */
                const sRev = this.strReverse(sFwd);
                if (pwd.toLowerCase().indexOf(sFwd) !== -1 || pwd.toLowerCase().indexOf(sRev) !== -1) {
                    nSeqNumber++;
                    nSeqChar++;
                }
            }
            for (let s = 0; s < 8; s++) {
                /** @type {?} */
                const sFwd = sSymbols.substring(s, Number(s + 3));
                /** @type {?} */
                const sRev = this.strReverse(sFwd);
                if (pwd.toLowerCase().indexOf(sFwd) !== -1 || pwd.toLowerCase().indexOf(sRev) !== -1) {
                    nSeqSymbol++;
                    nSeqChar++;
                }
            }
            if (nAlphaUC > 0 && nAlphaUC < nLength) {
                nScore = Number(nScore + ((nLength - nAlphaUC) * 2));
                sAlphaUC = '+ ' + Number((nLength - nAlphaUC) * 2);
            }
            if (nAlphaLC > 0 && nAlphaLC < nLength) {
                nScore = Number(nScore + ((nLength - nAlphaLC) * 2));
                sAlphaLC = '+ ' + Number((nLength - nAlphaLC) * 2);
            }
            if (nNumber > 0 && nNumber < nLength) {
                nScore = Number(nScore + (nNumber * nMultNumber));
                sNumber = '+ ' + Number(nNumber * nMultNumber);
            }
            if (nSymbol > 0) {
                nScore = Number(nScore + (nSymbol * nMultSymbol));
                sSymbol = '+ ' + Number(nSymbol * nMultSymbol);
            }
            if (nMidChar > 0) {
                nScore = Number(nScore + (nMidChar * nMultMidChar));
                sMidChar = '+ ' + Number(nMidChar * nMultMidChar);
            }
            if ((nAlphaLC > 0 || nAlphaUC > 0) && nSymbol === 0 && nNumber === 0) { // Only Letters
                nScore = Number(nScore - nLength);
                nAlphasOnly = nLength;
                sAlphasOnly = '- ' + nLength;
            }
            if (nAlphaLC === 0 && nAlphaUC === 0 && nSymbol === 0 && nNumber > 0) { // Only Numbers
                nScore = Number(nScore - nLength);
                nNumbersOnly = nLength;
                sNumbersOnly = '- ' + nLength;
            }
            if (nRepChar > 0) { // Same character exists more than once
                nScore = Number(nScore - nRepInc);
                sRepChar = '- ' + nRepInc;
            }
            if (nConsecAlphaUC > 0) { // Consecutive Uppercase Letters exist
                nScore = Number(nScore - (nConsecAlphaUC * nMultConsecAlphaUC));
                sConsecAlphaUC = '- ' + Number(nConsecAlphaUC * nMultConsecAlphaUC);
            }
            if (nConsecAlphaLC > 0) { // Consecutive Lowercase Letters exist
                nScore = Number(nScore - (nConsecAlphaLC * nMultConsecAlphaLC));
                sConsecAlphaLC = '- ' + Number(nConsecAlphaLC * nMultConsecAlphaLC);
            }
            if (nConsecNumber > 0) { // Consecutive Numbers exist
                nScore = Number(nScore - (nConsecNumber * nMultConsecNumber));
                sConsecNumber = '- ' + Number(nConsecNumber * nMultConsecNumber);
            }
            if (nSeqAlpha > 0) { // Sequential alpha strings exist (3 characters or more)
                nScore = Number(nScore - (nSeqAlpha * nMultSeqAlpha));
                sSeqAlpha = '- ' + Number(nSeqAlpha * nMultSeqAlpha);
            }
            if (nSeqNumber > 0) { // Sequential numeric strings exist (3 characters or more)
                nScore = Number(nScore - (nSeqNumber * nMultSeqNumber));
                sSeqNumber = '- ' + Number(nSeqNumber * nMultSeqNumber);
            }
            if (nSeqSymbol > 0) { // Sequential symbol strings exist (3 characters or more)
                nScore = Number(nScore - (nSeqSymbol * nMultSeqSymbol));
                sSeqSymbol = '- ' + Number(nSeqSymbol * nMultSeqSymbol);
            }
            /** @type {?} */
            let arrChars = [nLength, nAlphaUC, nAlphaLC, nNumber, nSymbol];
            /** @type {?} */
            let arrCharsIds = ['nLength', 'nAlphaUC', 'nAlphaLC', 'nNumber', 'nSymbol'];
            /** @type {?} */
            let arrCharsLen = arrChars.length;
            /** @type {?} */
            let minVal;
            for (let c = 0; c < arrCharsLen; c++) {
                // let oImg = $('div_' + arrCharsIds[c]);
                // let oBonus = $(arrCharsIds[c] + 'Bonus');
                // $(arrCharsIds[c]).innerHTML = arrChars[c];
                if (arrCharsIds[c] === 'nLength') {
                    minVal = Number(nMinPwdLen - 1);
                }
                else {
                    minVal = 0;
                }
                if (arrChars[c] === Number(minVal + 1)) {
                    nReqChar++;
                }
                else if (arrChars[c] > Number(minVal + 1)) {
                    nReqChar++;
                }
            }
            nRequirements = nReqChar;
            /** @type {?} */
            let nMinReqChars;
            if (pwd.length >= nMinPwdLen) {
                nMinReqChars = 3;
            }
            else {
                nMinReqChars = 4;
            }
            if (nRequirements > nMinReqChars) { // One or more required characters exist
                nScore = Number(nScore + (nRequirements * 2));
            }
            arrChars = [nMidChar, nRequirements];
            arrCharsIds = ['nMidChar', 'nRequirements'];
            arrCharsLen = arrChars.length;
            for (let c = 0; c < arrCharsLen; c++) {
                if (arrCharsIds[c] === 'nRequirements') {
                    minVal = nMinReqChars;
                }
                else {
                    minVal = 0;
                }
            }
            arrChars = [nAlphasOnly, nNumbersOnly, nRepChar, nConsecAlphaUC, nConsecAlphaLC, nConsecNumber, nSeqAlpha, nSeqNumber, nSeqSymbol];
            arrCharsIds = ['nAlphasOnly', 'nNumbersOnly', 'nRepChar', 'nConsecAlphaUC', 'nConsecAlphaLC', 'nConsecNumber', 'nSeqAlpha', 'nSeqNumber', 'nSeqSymbol'];
            arrCharsLen = arrChars.length;
            for (let c = 0; c < arrCharsLen; c++) {
                // const oImg = $('div_' + arrCharsIds[c]);
                // const oBonus = $(arrCharsIds[c] + 'Bonus');
                // $(arrCharsIds[c]).innerHTML = arrChars[c];
                if (arrChars[c] > 0) {
                    // oImg.className = 'warn';
                    // oBonus.parentNode.className = 'warn';
                }
                else {
                    // oImg.className = 'pass';
                    // oBonus.parentNode.className = 'pass';
                }
            }
            if (nScore > 100) {
                nScore = 100;
            }
            else if (nScore < 0) {
                nScore = 0;
            }
            if (nScore >= 0 && nScore < 20) {
                this.complexity = 'خیلی ضعیف';
                this.meter.nativeElement.style.width = nScore + '%';
                this.color = 'darkred';
            }
            else if (nScore >= 20 && nScore < 40) {
                this.meter.nativeElement.style.width = nScore + '%';
                this.color = 'red';
                this.complexity = 'ضعیف';
            }
            else if (nScore >= 40 && nScore < 60) {
                this.meter.nativeElement.style.width = nScore + '%';
                this.color = 'greenyellow';
                this.complexity = 'خوب';
            }
            else if (nScore >= 60 && nScore < 80) {
                this.meter.nativeElement.style.width = nScore + '%';
                this.color = 'lightgreen';
                this.complexity = 'قوی';
            }
            else if (nScore >= 80 && nScore <= 100) {
                this.meter.nativeElement.style.width = nScore + '%';
                this.color = 'green';
                this.complexity = 'خیلی قوی';
            }
            this.score = nScore.toString();
            this.meter.nativeElement.style.width = nScore + '%';
            // oScore.innerHTML  = nScore + '%';
            // oComplexity.innerHTML = sComplexity;
        }
        else {
            this.score = nScore.toString() + '%';
            // this.initPwdChk();
            // oScore.innerHTML = nScore + '%';
            // oComplexity.innerHTML = sComplexity;
        }
    }
    /**
     * @param {?} str
     * @return {?}
     */
    strReverse(str) {
        /** @type {?} */
        let newstring = '';
        for (let s = 0; s < str.length; s++) {
            newstring = str.charAt(s) + newstring;
        }
        return newstring;
    }
}
TaminFieldPasswordComponent.decorators = [
    { type: Component, args: [{
                selector: 'tamin-field-password',
                template: "<div>\n  <input\n    type=\"password\"\n    style=\"direction: ltr\"\n    class=\"tamin-form-control-input\"\n    [disabled]=\"control.disabled\"\n    [class.tamin-form-control-valid]=\"control.touched && control.valid\"\n    [class.tamin-form-control-invalid]=\"control.touched && !control.valid\"\n    #inputElement>\n  <div #meterContainer\n       style=\"height: 20px\"\n       class=\"meter-container\"\n       [class.meter-container-bkg-color]=\"complexity !== ''\"\n       [style.visibility]=\"showPasswordMeter ? 'visible' : 'hidden'\">\n    <div #meter [style.background-color]=\"color\" class=\"meter\" [hidden]=\"complexity == ''\"\n         style=\"color:white; padding-right: 5px\">\n      <span style=\"white-space: nowrap\">{{complexity}}</span>&nbsp;<span>(%{{score}})</span>\n    </div>\n  </div>\n</div>\n\n",
                providers: [
                    {
                        provide: NG_VALUE_ACCESSOR,
                        useExisting: forwardRef((/**
                         * @return {?}
                         */
                        () => TaminFieldPasswordComponent)),
                        multi: true
                    }
                ],
                styles: [".meter-container{height:20px}.meter-container-bkg-color{background-color:#bbb}.meter{float:right;height:20px}"]
            }] }
];
TaminFieldPasswordComponent.propDecorators = {
    meter: [{ type: ViewChild, args: ['meter',] }],
    meterContainer: [{ type: ViewChild, args: ['meterContainer',] }],
    showPasswordMeter: [{ type: Input }]
};
if (false) {
    /** @type {?} */
    TaminFieldPasswordComponent.prototype.meter;
    /** @type {?} */
    TaminFieldPasswordComponent.prototype.meterContainer;
    /** @type {?} */
    TaminFieldPasswordComponent.prototype.showPasswordMeter;
    /** @type {?} */
    TaminFieldPasswordComponent.prototype.color;
    /** @type {?} */
    TaminFieldPasswordComponent.prototype.complexity;
    /** @type {?} */
    TaminFieldPasswordComponent.prototype.score;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFtaW4tZmllbGQtcGFzc3dvcmQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vdGFtaW4tZnJhbWV3b3JrLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvZmllbGRzL3RhbWluLWZpZWxkLXBhc3N3b3JkL3RhbWluLWZpZWxkLXBhc3N3b3JkLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFDLFNBQVMsRUFBRSxVQUFVLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDbEYsT0FBTyxFQUFDLGlCQUFpQixFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFDakQsT0FBTyxFQUFDLGtCQUFrQixFQUFDLE1BQU0sb0NBQW9DLENBQUM7QUFDdEUsT0FBTyxFQUFDLFNBQVMsRUFBQyxNQUFNLE1BQU0sQ0FBQztBQWMvQixNQUFNLE9BQU8sMkJBQTRCLFNBQVEsa0JBQWtCO0lBWm5FOztRQW1CVyxzQkFBaUIsR0FBRyxLQUFLLENBQUM7UUFFbkMsZUFBVSxHQUFHLEVBQUUsQ0FBQztRQUNoQixVQUFLLEdBQUcsRUFBRSxDQUFDO1FBd1ZYLGlCQUFpQjtRQUNqQiw4REFBOEQ7UUFDOUQsSUFBSTtJQUNOLENBQUM7Ozs7SUF6VkMsbUJBQW1CO1FBQ2pCLFVBQVU7OztRQUFDLEdBQUcsRUFBRTs7a0JBQ1IsTUFBTSxHQUFHLFNBQVMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLGFBQWEsRUFBRSxPQUFPLENBQUM7WUFDbEUsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLFNBQVM7Ozs7WUFBQyxDQUFDLEdBQVEsRUFBRSxFQUFFO2dCQUNsRCxJQUFJLElBQUksQ0FBQyxpQkFBaUIsRUFBRTtvQkFDMUIsSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO2lCQUN0QztZQUNILENBQUMsRUFBQyxD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QUcsQ0FBQztZQUNyQyxxQkFBcUI7WUFDckIsbUNBQW1DO1lBQ25DLHVDQUF1QztTQUN4QztJQUNILENBQUM7Ozs7O0lBRUQsVUFBVSxDQUFDLEdBQUc7O1lBQ1IsU0FBUyxHQUFHLEVBQUU7UUFDbEIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7WUFDbkMsU0FBUyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDO1NBQ3ZDO1FBQ0QsT0FBTyxTQUFTLENBQUM7SUFDbkIsQ0FBQzs7O1lBNVdGLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsc0JBQXNCO2dCQUNoQyxxMEJBQW9EO2dCQUVwRCxTQUFTLEVBQUU7b0JBQ1Q7d0JBQ0UsT0FBTyxFQUFFLGlCQUFpQjt3QkFDMUIsV0FBVyxFQUFFLFVBQVU7Ozt3QkFBQyxHQUFHLEVBQUUsQ0FBQywyQkFBMkIsRUFBQzt3QkFDMUQsS0FBSyxFQUFFLElBQUk7cUJBQ1o7aUJBQ0Y7O2FBQ0Y7OztvQkFNRSxTQUFTLFNBQUMsT0FBTzs2QkFDakIsU0FBUyxTQUFDLGdCQUFnQjtnQ0FDMUIsS0FBSzs7OztJQUZOLDRDQUFzQzs7SUFDdEMscURBQXdEOztJQUN4RCx3REFBbUM7O0lBQ25DLDRDQUFjOztJQUNkLGlEQUFnQjs7SUFDaEIsNENBQVciLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NvbXBvbmVudCwgRWxlbWVudFJlZiwgZm9yd2FyZFJlZiwgSW5wdXQsIFZpZXdDaGlsZH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge05HX1ZBTFVFX0FDQ0VTU09SfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQge0ZpZWxkQmFzZUNvbXBvbmVudH0gZnJvbSAnLi4vLi4vLi4vYmFzZS9maWVsZC1iYXNlLmNvbXBvbmVudCc7XG5pbXBvcnQge2Zyb21FdmVudH0gZnJvbSAncnhqcyc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3RhbWluLWZpZWxkLXBhc3N3b3JkJyxcbiAgdGVtcGxhdGVVcmw6ICcuL3RhbWluLWZpZWxkLXBhc3N3b3JkLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vdGFtaW4tZmllbGQtcGFzc3dvcmQuY29tcG9uZW50LnNjc3MnXSxcbiAgcHJvdmlkZXJzOiBbXG4gICAge1xuICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBUYW1pbkZpZWxkUGFzc3dvcmRDb21wb25lbnQpLFxuICAgICAgbXVsdGk6IHRydWVcbiAgICB9XG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgVGFtaW5GaWVsZFBhc3N3b3JkQ29tcG9uZW50IGV4dGVuZHMgRmllbGRCYXNlQ29tcG9uZW50IHtcblxuICAvLyBAVmlld0NoaWxkKCdzY29yZScpIHNjb3JlOiBFbGVtZW50UmVmO1xuICAvLyBAVmlld0NoaWxkKCdzY29yZWJhcicpIHNjb3JlYmFyOiBFbGVtZW50UmVmO1xuICAvLyBAVmlld0NoaWxkKCdjb21wbGV4aXR5JykgY29tcGxleGl0eTogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZCgnbWV0ZXInKSBtZXRlcjogRWxlbWVudFJlZjtcbiAgQFZpZXdDaGlsZCgnbWV0ZXJDb250YWluZXInKSBtZXRlckNvbnRhaW5lcjogRWxlbWVudFJlZjtcbiAgQElucHV0KCkgc2hvd1Bhc3N3b3JkTWV0ZXIgPSBmYWxzZTtcbiAgY29sb3I6IHN0cmluZztcbiAgY29tcGxleGl0eSA9ICcnO1xuICBzY29yZSA9ICcnO1xuXG4gIGluaXRpYWxpemVDb21wb25lbnQoKSB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCBrZXl1cHMgPSBmcm9tRXZlbnQodGhpcy5pbnB1dEVsZW1lbnQubmF0aXZlRWxlbWVudCwgJ2tleXVwJyk7XG4gICAgICB0aGlzLnN1YnNjcmlwdGlvbi5hZGQoa2V5dXBzLnN1YnNjcmliZSgoZXZ0OiBhbnkpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuc2hvd1Bhc3N3b3JkTWV0ZXIpIHtcbiAgICAgICAgICB0aGlzLmNoZWNrUGFzc3dvcmQoZXZ0LnRhcmdldC52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH0pKTtcbiAgICB9LCAwKTtcbiAgfVxuXG4gIGNoZWNrUGFzc3dvcmQocHdkOiBzdHJpbmcpIHtcbiAgICB0aGlzLmNvbG9yID0gJ3doaXRlJztcbiAgICB0aGlzLmNvbXBsZXhpdHkgPSAnJztcbiAgICB0aGlzLnNjb3JlID0gJyc7XG4gICAgaWYgKHB3ZC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBuU2NvcmUgPSAwLFxuICAgICAgbkxlbmd0aCA9IDAsXG4gICAgICBuQWxwaGFVQyA9IDAsXG4gICAgICBuQWxwaGFMQyA9IDAsXG4gICAgICBuTnVtYmVyID0gMCxcbiAgICAgIG5TeW1ib2wgPSAwLFxuICAgICAgbk1pZENoYXIgPSAwLFxuICAgICAgblJlcXVpcmVtZW50cyA9IDAsXG4gICAgICBuQWxwaGFzT25seSA9IDAsXG4gICAgICBuTnVtYmVyc09ubHkgPSAwLFxuICAgICAgblVucUNoYXIgPSAwLFxuICAgICAgblJlcENoYXIgPSAwLFxuICAgICAgblJlcEluYyA9IDAsXG4gICAgICBuQ29uc2VjQWxwaGFVQyA9IDAsXG4gICAgICBuQ29uc2VjQWxwaGFMQyA9IDAsXG4gICAgICBuQ29uc2VjTnVtYmVyID0gMCxcbiAgICAgIG5Db25zZWNTeW1ib2wgPSAwLFxuICAgICAgbkNvbnNlY0NoYXJUeXBlID0gMCxcbiAgICAgIG5TZXFBbHBoYSA9IDAsXG4gICAgICBuU2VxTnVtYmVyID0gMCxcbiAgICAgIG5TZXFTeW1ib2wgPSAwLFxuICAgICAgblNlcUNoYXIgPSAwLFxuICAgICAgblJlcUNoYXIgPSAwO1xuICAgIC8vIG5NdWx0Q29uc2VjQ2hhclR5cGUgPSAwO1xuICAgIC8vIGNvbnN0IG5NdWx0UmVwQ2hhciA9IDEsIG5NdWx0Q29uc2VjU3ltYm9sID0gMTtcbiAgICBjb25zdCBuTXVsdE1pZENoYXIgPSAyLFxuICAgICAgLypuTXVsdFJlcXVpcmVtZW50cyA9IDIsKi9cbiAgICAgIG5NdWx0Q29uc2VjQWxwaGFVQyA9IDIsXG4gICAgICBuTXVsdENvbnNlY0FscGhhTEMgPSAyLFxuICAgICAgbk11bHRDb25zZWNOdW1iZXIgPSAyO1xuICAgIGNvbnN0IG5SZXFDaGFyVHlwZSA9IDMsXG4gICAgICAvKm5NdWx0QWxwaGFVQyA9IDMsKi9cbiAgICAgIC8qbk11bHRBbHBoYUxDID0gMywqL1xuICAgICAgbk11bHRTZXFBbHBoYSA9IDMsXG4gICAgICBuTXVsdFNlcU51bWJlciA9IDMsXG4gICAgICBuTXVsdFNlcVN5bWJvbCA9IDM7XG4gICAgY29uc3Qgbk11bHRMZW5ndGggPSA0LFxuICAgICAgbk11bHROdW1iZXIgPSA0O1xuICAgIGNvbnN0IG5NdWx0U3ltYm9sID0gNjtcbiAgICBsZXQgblRtcEFscGhhVUMgPSAnJyxcbiAgICAgIG5UbXBBbHBoYUxDID0gJycsXG4gICAgICBuVG1wTnVtYmVyID0gJycsIG5UbXBTeW1ib2wgPSAnJztcbiAgICBsZXQgc0FscGhhVUMgPSAnMCcsXG4gICAgICBzQWxwaGFMQyA9ICcwJyxcbiAgICAgIHNOdW1iZXIgPSAnMCcsXG4gICAgICBzU3ltYm9sID0gJzAnLFxuICAgICAgc01pZENoYXIgPSAnMCcsXG4gICAgICAvLyBzUmVxdWlyZW1lbnRzID0gJzAnLFxuICAgICAgc0FscGhhc09ubHkgPSAnMCcsXG4gICAgICBzTnVtYmVyc09ubHkgPSAnMCcsXG4gICAgICBzUmVwQ2hhciA9ICcwJyxcbiAgICAgIHNDb25zZWNBbHBoYVVDID0gJzAnLFxuICAgICAgc0NvbnNlY0FscGhhTEMgPSAnMCcsXG4gICAgICBzQ29uc2VjTnVtYmVyID0gJzAnLFxuICAgICAgc1NlcUFscGhhID0gJzAnLFxuICAgICAgc1NlcU51bWJlciA9ICcwJyxcbiAgICAgIHNTZXFTeW1ib2wgPSAnMCc7XG4gICAgY29uc3Qgc0FscGhhcyA9ICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eic7XG4gICAgY29uc3Qgc051bWVyaWNzID0gJzAxMjM0NTY3ODkwJztcbiAgICBjb25zdCBzU3ltYm9scyA9ICcpIUAjJCVeJiooKSc7XG4gICAgLypsZXQgc0NvbXBsZXhpdHkgPSAnJzsqL1xuICAgIGNvbnN0IHNTdGFuZGFyZHMgPSAnQmVsb3cnO1xuICAgIGNvbnN0IG5NaW5Qd2RMZW4gPSA4O1xuICAgIGlmIChkb2N1bWVudC5hbGwpIHtcbiAgICAgIGNvbnN0IG5kID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgbmQgPSAxO1xuICAgIH1cbiAgICBpZiAocHdkKSB7XG4gICAgICBuU2NvcmUgPSBOdW1iZXIocHdkLmxlbmd0aCAqIG5NdWx0TGVuZ3RoKTtcbiAgICAgIG5MZW5ndGggPSBwd2QubGVuZ3RoO1xuICAgICAgY29uc3QgYXJyUHdkID0gcHdkLnJlcGxhY2UoL1xccysvZywgJycpLnNwbGl0KC9cXHMqLyk7XG4gICAgICBjb25zdCBhcnJQd2RMZW4gPSBhcnJQd2QubGVuZ3RoO1xuXG4gICAgICBmb3IgKGxldCBhID0gMDsgYSA8IGFyclB3ZExlbjsgYSsrKSB7XG4gICAgICAgIGlmIChhcnJQd2RbYV0ubWF0Y2goL1tBLVpdL2cpKSB7XG4gICAgICAgICAgaWYgKG5UbXBBbHBoYVVDICE9PSAnJykge1xuICAgICAgICAgICAgaWYgKE51bWJlcihuVG1wQWxwaGFVQyArIDEpID09PSBhKSB7XG4gICAgICAgICAgICAgIG5Db25zZWNBbHBoYVVDKys7XG4gICAgICAgICAgICAgIG5Db25zZWNDaGFyVHlwZSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBuVG1wQWxwaGFVQyA9IGEudG9TdHJpbmcoKTtcbiAgICAgICAgICBuQWxwaGFVQysrO1xuICAgICAgICB9IGVsc2UgaWYgKGFyclB3ZFthXS5tYXRjaCgvW2Etel0vZykpIHtcbiAgICAgICAgICBpZiAoblRtcEFscGhhTEMgIT09ICcnKSB7XG4gICAgICAgICAgICBpZiAoTnVtYmVyKG5UbXBBbHBoYUxDICsgMSkgPT09IGEpIHtcbiAgICAgICAgICAgICAgbkNvbnNlY0FscGhhTEMrKztcbiAgICAgICAgICAgICAgbkNvbnNlY0NoYXJUeXBlKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIG5UbXBBbHBoYUxDID0gYS50b1N0cmluZygpO1xuICAgICAgICAgIG5BbHBoYUxDKys7XG4gICAgICAgIH0gZWxzZSBpZiAoYXJyUHdkW2FdLm1hdGNoKC9bMC05XS9nKSkge1xuICAgICAgICAgIGlmIChhID4gMCAmJiBhIDwgKGFyclB3ZExlbiAtIDEpKSB7XG4gICAgICAgICAgICBuTWlkQ2hhcisrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoblRtcE51bWJlciAhPT0gJycpIHtcbiAgICAgICAgICAgIGlmIChOdW1iZXIoblRtcE51bWJlciArIDEpID09PSBhKSB7XG4gICAgICAgICAgICAgIG5Db25zZWNOdW1iZXIrKztcbiAgICAgICAgICAgICAgbkNvbnNlY0NoYXJUeXBlKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIG5UbXBOdW1iZXIgPSBhLnRvU3RyaW5nKCk7XG4gICAgICAgICAgbk51bWJlcisrO1xuICAgICAgICB9IGVsc2UgaWYgKGFyclB3ZFthXS5tYXRjaCgvW15hLXpBLVowLTlfXS9nKSkge1xuICAgICAgICAgIGlmIChhID4gMCAmJiBhIDwgKGFyclB3ZExlbiAtIDEpKSB7XG4gICAgICAgICAgICBuTWlkQ2hhcisrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoblRtcFN5bWJvbCAhPT0gJycpIHtcbiAgICAgICAgICAgIGlmIChOdW1iZXIoblRtcFN5bWJvbCArIDEpID09PSBhKSB7XG4gICAgICAgICAgICAgIG5Db25zZWNTeW1ib2wrKztcbiAgICAgICAgICAgICAgbkNvbnNlY0NoYXJUeXBlKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIG5UbXBTeW1ib2wgPSBhLnRvU3RyaW5nKCk7XG4gICAgICAgICAgblN5bWJvbCsrO1xuICAgICAgICB9XG4gICAgICAgIGxldCBiQ2hhckV4aXN0cyA9IGZhbHNlO1xuICAgICAgICBmb3IgKGxldCBiID0gMDsgYiA8IGFyclB3ZExlbjsgYisrKSB7XG4gICAgICAgICAgaWYgKGFyclB3ZFthXSA9PT0gYXJyUHdkW2JdICYmIGEgIT09IGIpIHsgLyogcmVwZWF0IGNoYXJhY3RlciBleGlzdHMgKi9cbiAgICAgICAgICAgIGJDaGFyRXhpc3RzID0gdHJ1ZTtcbiAgICAgICAgICAgIG5SZXBJbmMgKz0gTWF0aC5hYnMoYXJyUHdkTGVuIC8gKGIgLSBhKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChiQ2hhckV4aXN0cykge1xuICAgICAgICAgIG5SZXBDaGFyKys7XG4gICAgICAgICAgblVucUNoYXIgPSBhcnJQd2RMZW4gLSBuUmVwQ2hhcjtcbiAgICAgICAgICBuUmVwSW5jID0gKG5VbnFDaGFyKSA/IE1hdGguY2VpbChuUmVwSW5jIC8gblVucUNoYXIpIDogTWF0aC5jZWlsKG5SZXBJbmMpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qIENoZWNrIGZvciBzZXF1ZW50aWFsIGFscGhhIHN0cmluZyBwYXR0ZXJucyAoZm9yd2FyZCBhbmQgcmV2ZXJzZSkgKi9cbiAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgMjM7IHMrKykge1xuICAgICAgICBjb25zdCBzRndkID0gc0FscGhhcy5zdWJzdHJpbmcocywgTnVtYmVyKHMgKyAzKSk7XG4gICAgICAgIGNvbnN0IHNSZXYgPSB0aGlzLnN0clJldmVyc2Uoc0Z3ZCk7XG4gICAgICAgIGlmIChwd2QudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNGd2QpICE9PSAtMSB8fCBwd2QudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNSZXYpICE9PSAtMSkge1xuICAgICAgICAgIG5TZXFBbHBoYSsrO1xuICAgICAgICAgIG5TZXFDaGFyKys7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCA4OyBzKyspIHtcbiAgICAgICAgY29uc3Qgc0Z3ZCA9IHNOdW1lcmljcy5zdWJzdHJpbmcocywgTnVtYmVyKHMgKyAzKSk7XG4gICAgICAgIGNvbnN0IHNSZXYgPSB0aGlzLnN0clJldmVyc2Uoc0Z3ZCk7XG4gICAgICAgIGlmIChwd2QudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNGd2QpICE9PSAtMSB8fCBwd2QudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNSZXYpICE9PSAtMSkge1xuICAgICAgICAgIG5TZXFOdW1iZXIrKztcbiAgICAgICAgICBuU2VxQ2hhcisrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgODsgcysrKSB7XG4gICAgICAgIGNvbnN0IHNGd2QgPSBzU3ltYm9scy5zdWJzdHJpbmcocywgTnVtYmVyKHMgKyAzKSk7XG4gICAgICAgIGNvbnN0IHNSZXYgPSB0aGlzLnN0clJldmVyc2Uoc0Z3ZCk7XG4gICAgICAgIGlmIChwd2QudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNGd2QpICE9PSAtMSB8fCBwd2QudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNSZXYpICE9PSAtMSkge1xuICAgICAgICAgIG5TZXFTeW1ib2wrKztcbiAgICAgICAgICBuU2VxQ2hhcisrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChuQWxwaGFVQyA+IDAgJiYgbkFscGhhVUMgPCBuTGVuZ3RoKSB7XG4gICAgICAgIG5TY29yZSA9IE51bWJlcihuU2NvcmUgKyAoKG5MZW5ndGggLSBuQWxwaGFVQykgKiAyKSk7XG4gICAgICAgIHNBbHBoYVVDID0gJysgJyArIE51bWJlcigobkxlbmd0aCAtIG5BbHBoYVVDKSAqIDIpO1xuICAgICAgfVxuICAgICAgaWYgKG5BbHBoYUxDID4gMCAmJiBuQWxwaGFMQyA8IG5MZW5ndGgpIHtcbiAgICAgICAgblNjb3JlID0gTnVtYmVyKG5TY29yZSArICgobkxlbmd0aCAtIG5BbHBoYUxDKSAqIDIpKTtcbiAgICAgICAgc0FscGhhTEMgPSAnKyAnICsgTnVtYmVyKChuTGVuZ3RoIC0gbkFscGhhTEMpICogMik7XG4gICAgICB9XG4gICAgICBpZiAobk51bWJlciA+IDAgJiYgbk51bWJlciA8IG5MZW5ndGgpIHtcbiAgICAgICAgblNjb3JlID0gTnVtYmVyKG5TY29yZSArIChuTnVtYmVyICogbk11bHROdW1iZXIpKTtcbiAgICAgICAgc051bWJlciA9ICcrICcgKyBOdW1iZXIobk51bWJlciAqIG5NdWx0TnVtYmVyKTtcbiAgICAgIH1cbiAgICAgIGlmIChuU3ltYm9sID4gMCkge1xuICAgICAgICBuU2NvcmUgPSBOdW1iZXIoblNjb3JlICsgKG5TeW1ib2wgKiBuTXVsdFN5bWJvbCkpO1xuICAgICAgICBzU3ltYm9sID0gJysgJyArIE51bWJlcihuU3ltYm9sICogbk11bHRTeW1ib2wpO1xuICAgICAgfVxuICAgICAgaWYgKG5NaWRDaGFyID4gMCkge1xuICAgICAgICBuU2NvcmUgPSBOdW1iZXIoblNjb3JlICsgKG5NaWRDaGFyICogbk11bHRNaWRDaGFyKSk7XG4gICAgICAgIHNNaWRDaGFyID0gJysgJyArIE51bWJlcihuTWlkQ2hhciAqIG5NdWx0TWlkQ2hhcik7XG4gICAgICB9XG5cbiAgICAgIGlmICgobkFscGhhTEMgPiAwIHx8IG5BbHBoYVVDID4gMCkgJiYgblN5bWJvbCA9PT0gMCAmJiBuTnVtYmVyID09PSAwKSB7ICAvLyBPbmx5IExldHRlcnNcbiAgICAgICAgblNjb3JlID0gTnVtYmVyKG5TY29yZSAtIG5MZW5ndGgpO1xuICAgICAgICBuQWxwaGFzT25seSA9IG5MZW5ndGg7XG4gICAgICAgIHNBbHBoYXNPbmx5ID0gJy0gJyArIG5MZW5ndGg7XG4gICAgICB9XG4gICAgICBpZiAobkFscGhhTEMgPT09IDAgJiYgbkFscGhhVUMgPT09IDAgJiYgblN5bWJvbCA9PT0gMCAmJiBuTnVtYmVyID4gMCkgeyAgLy8gT25seSBOdW1iZXJzXG4gICAgICAgIG5TY29yZSA9IE51bWJlcihuU2NvcmUgLSBuTGVuZ3RoKTtcbiAgICAgICAgbk51bWJlcnNPbmx5ID0gbkxlbmd0aDtcbiAgICAgICAgc051bWJlcnNPbmx5ID0gJy0gJyArIG5MZW5ndGg7XG4gICAgICB9XG4gICAgICBpZiAoblJlcENoYXIgPiAwKSB7ICAvLyBTYW1lIGNoYXJhY3RlciBleGlzdHMgbW9yZSB0aGFuIG9uY2VcbiAgICAgICAgblNjb3JlID0gTnVtYmVyKG5TY29yZSAtIG5SZXBJbmMpO1xuICAgICAgICBzUmVwQ2hhciA9ICctICcgKyBuUmVwSW5jO1xuICAgICAgfVxuICAgICAgaWYgKG5Db25zZWNBbHBoYVVDID4gMCkgeyAgLy8gQ29uc2VjdXRpdmUgVXBwZXJjYXNlIExldHRlcnMgZXhpc3RcbiAgICAgICAgblNjb3JlID0gTnVtYmVyKG5TY29yZSAtIChuQ29uc2VjQWxwaGFVQyAqIG5NdWx0Q29uc2VjQWxwaGFVQykpO1xuICAgICAgICBzQ29uc2VjQWxwaGFVQyA9ICctICcgKyBOdW1iZXIobkNvbnNlY0FscGhhVUMgKiBuTXVsdENvbnNlY0FscGhhVUMpO1xuICAgICAgfVxuICAgICAgaWYgKG5Db25zZWNBbHBoYUxDID4gMCkgeyAgLy8gQ29uc2VjdXRpdmUgTG93ZXJjYXNlIExldHRlcnMgZXhpc3RcbiAgICAgICAgblNjb3JlID0gTnVtYmVyKG5TY29yZSAtIChuQ29uc2VjQWxwaGFMQyAqIG5NdWx0Q29uc2VjQWxwaGFMQykpO1xuICAgICAgICBzQ29uc2VjQWxwaGFMQyA9ICctICcgKyBOdW1iZXIobkNvbnNlY0FscGhhTEMgKiBuTXVsdENvbnNlY0FscGhhTEMpO1xuICAgICAgfVxuICAgICAgaWYgKG5Db25zZWNOdW1iZXIgPiAwKSB7ICAvLyBDb25zZWN1dGl2ZSBOdW1iZXJzIGV4aXN0XG4gICAgICAgIG5TY29yZSA9IE51bWJlcihuU2NvcmUgLSAobkNvbnNlY051bWJlciAqIG5NdWx0Q29uc2VjTnVtYmVyKSk7XG4gICAgICAgIHNDb25zZWNOdW1iZXIgPSAnLSAnICsgTnVtYmVyKG5Db25zZWNOdW1iZXIgKiBuTXVsdENvbnNlY051bWJlcik7XG4gICAgICB9XG4gICAgICBpZiAoblNlcUFscGhhID4gMCkgeyAgLy8gU2VxdWVudGlhbCBhbHBoYSBzdHJpbmdzIGV4aXN0ICgzIGNoYXJhY3RlcnMgb3IgbW9yZSlcbiAgICAgICAgblNjb3JlID0gTnVtYmVyKG5TY29yZSAtIChuU2VxQWxwaGEgKiBuTXVsdFNlcUFscGhhKSk7XG4gICAgICAgIHNTZXFBbHBoYSA9ICctICcgKyBOdW1iZXIoblNlcUFscGhhICogbk11bHRTZXFBbHBoYSk7XG4gICAgICB9XG4gICAgICBpZiAoblNlcU51bWJlciA+IDApIHsgIC8vIFNlcXVlbnRpYWwgbnVtZXJpYyBzdHJpbmdzIGV4aXN0ICgzIGNoYXJhY3RlcnMgb3IgbW9yZSlcbiAgICAgICAgblNjb3JlID0gTnVtYmVyKG5TY29yZSAtIChuU2VxTnVtYmVyICogbk11bHRTZXFOdW1iZXIpKTtcbiAgICAgICAgc1NlcU51bWJlciA9ICctICcgKyBOdW1iZXIoblNlcU51bWJlciAqIG5NdWx0U2VxTnVtYmVyKTtcbiAgICAgIH1cbiAgICAgIGlmIChuU2VxU3ltYm9sID4gMCkgeyAgLy8gU2VxdWVudGlhbCBzeW1ib2wgc3RyaW5ncyBleGlzdCAoMyBjaGFyYWN0ZXJzIG9yIG1vcmUpXG4gICAgICAgIG5TY29yZSA9IE51bWJlcihuU2NvcmUgLSAoblNlcVN5bWJvbCAqIG5NdWx0U2VxU3ltYm9sKSk7XG4gICAgICAgIHNTZXFTeW1ib2wgPSAnLSAnICsgTnVtYmVyKG5TZXFTeW1ib2wgKiBuTXVsdFNlcVN5bWJvbCk7XG4gICAgICB9XG5cbiAgICAgIGxldCBhcnJDaGFycyA9IFtuTGVuZ3RoLCBuQWxwaGFVQywgbkFscGhhTEMsIG5OdW1iZXIsIG5TeW1ib2xdO1xuICAgICAgbGV0IGFyckNoYXJzSWRzID0gWyduTGVuZ3RoJywgJ25BbHBoYVVDJywgJ25BbHBoYUxDJywgJ25OdW1iZXInLCAnblN5bWJvbCddO1xuICAgICAgbGV0IGFyckNoYXJzTGVuID0gYXJyQ2hhcnMubGVuZ3RoO1xuICAgICAgbGV0IG1pblZhbDtcbiAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgYXJyQ2hhcnNMZW47IGMrKykge1xuICAgICAgICAvLyBsZXQgb0ltZyA9ICQoJ2Rpdl8nICsgYXJyQ2hhcnNJZHNbY10pO1xuICAgICAgICAvLyBsZXQgb0JvbnVzID0gJChhcnJDaGFyc0lkc1tjXSArICdCb251cycpO1xuICAgICAgICAvLyAkKGFyckNoYXJzSWRzW2NdKS5pbm5lckhUTUwgPSBhcnJDaGFyc1tjXTtcbiAgICAgICAgaWYgKGFyckNoYXJzSWRzW2NdID09PSAnbkxlbmd0aCcpIHtcbiAgICAgICAgICBtaW5WYWwgPSBOdW1iZXIobk1pblB3ZExlbiAtIDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG1pblZhbCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGFyckNoYXJzW2NdID09PSBOdW1iZXIobWluVmFsICsgMSkpIHtcbiAgICAgICAgICBuUmVxQ2hhcisrO1xuICAgICAgICB9IGVsc2UgaWYgKGFyckNoYXJzW2NdID4gTnVtYmVyKG1pblZhbCArIDEpKSB7XG4gICAgICAgICAgblJlcUNoYXIrKztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgblJlcXVpcmVtZW50cyA9IG5SZXFDaGFyO1xuICAgICAgbGV0IG5NaW5SZXFDaGFycztcbiAgICAgIGlmIChwd2QubGVuZ3RoID49IG5NaW5Qd2RMZW4pIHtcbiAgICAgICAgbk1pblJlcUNoYXJzID0gMztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5NaW5SZXFDaGFycyA9IDQ7XG4gICAgICB9XG4gICAgICBpZiAoblJlcXVpcmVtZW50cyA+IG5NaW5SZXFDaGFycykgeyAgLy8gT25lIG9yIG1vcmUgcmVxdWlyZWQgY2hhcmFjdGVycyBleGlzdFxuICAgICAgICBuU2NvcmUgPSBOdW1iZXIoblNjb3JlICsgKG5SZXF1aXJlbWVudHMgKiAyKSk7XG4gICAgICB9XG5cbiAgICAgIGFyckNoYXJzID0gW25NaWRDaGFyLCBuUmVxdWlyZW1lbnRzXTtcbiAgICAgIGFyckNoYXJzSWRzID0gWyduTWlkQ2hhcicsICduUmVxdWlyZW1lbnRzJ107XG4gICAgICBhcnJDaGFyc0xlbiA9IGFyckNoYXJzLmxlbmd0aDtcbiAgICAgIGZvciAobGV0IGMgPSAwOyBjIDwgYXJyQ2hhcnNMZW47IGMrKykge1xuICAgICAgICBpZiAoYXJyQ2hhcnNJZHNbY10gPT09ICduUmVxdWlyZW1lbnRzJykge1xuICAgICAgICAgIG1pblZhbCA9IG5NaW5SZXFDaGFycztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtaW5WYWwgPSAwO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGFyckNoYXJzID0gW25BbHBoYXNPbmx5LCBuTnVtYmVyc09ubHksIG5SZXBDaGFyLCBuQ29uc2VjQWxwaGFVQywgbkNvbnNlY0FscGhhTEMsIG5Db25zZWNOdW1iZXIsIG5TZXFBbHBoYSwgblNlcU51bWJlciwgblNlcVN5bWJvbF07XG4gICAgICBhcnJDaGFyc0lkcyA9IFsnbkFscGhhc09ubHknLCAnbk51bWJlcnNPbmx5JywgJ25SZXBDaGFyJywgJ25Db25zZWNBbHBoYVVDJywgJ25Db25zZWNBbHBoYUxDJywgJ25Db25zZWNOdW1iZXInLCAnblNlcUFscGhhJywgJ25TZXFOdW1iZXInLCAnblNlcVN5bWJvbCddO1xuICAgICAgYXJyQ2hhcnNMZW4gPSBhcnJDaGFycy5sZW5ndGg7XG4gICAgICBmb3IgKGxldCBjID0gMDsgYyA8IGFyckNoYXJzTGVuOyBjKyspIHtcbiAgICAgICAgLy8gY29uc3Qgb0ltZyA9ICQoJ2Rpdl8nICsgYXJyQ2hhcnNJZHNbY10pO1xuICAgICAgICAvLyBjb25zdCBvQm9udXMgPSAkKGFyckNoYXJzSWRzW2NdICsgJ0JvbnVzJyk7XG4gICAgICAgIC8vICQoYXJyQ2hhcnNJZHNbY10pLmlubmVySFRNTCA9IGFyckNoYXJzW2NdO1xuICAgICAgICBpZiAoYXJyQ2hhcnNbY10gPiAwKSB7XG4gICAgICAgICAgLy8gb0ltZy5jbGFzc05hbWUgPSAnd2Fybic7XG4gICAgICAgICAgLy8gb0JvbnVzLnBhcmVudE5vZGUuY2xhc3NOYW1lID0gJ3dhcm4nO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIG9JbWcuY2xhc3NOYW1lID0gJ3Bhc3MnO1xuICAgICAgICAgIC8vIG9Cb251cy5wYXJlbnROb2RlLmNsYXNzTmFtZSA9ICdwYXNzJztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoblNjb3JlID4gMTAwKSB7XG4gICAgICAgIG5TY29yZSA9IDEwMDtcbiAgICAgIH0gZWxzZSBpZiAoblNjb3JlIDwgMCkge1xuICAgICAgICBuU2NvcmUgPSAwO1xuICAgICAgfVxuICAgICAgaWYgKG5TY29yZSA+PSAwICYmIG5TY29yZSA8IDIwKSB7XG4gICAgICAgIHRoaXMuY29tcGxleGl0eSA9ICfYrtuM2YTbjCDYtti524zZgSc7XG4gICAgICAgIHRoaXMubWV0ZXIubmF0aXZlRWxlbWVudC5zdHlsZS53aWR0aCA9IG5TY29yZSArICclJztcbiAgICAgICAgdGhpcy5jb2xvciA9ICdkYXJrcmVkJztcbiAgICAgIH0gZWxzZSBpZiAoblNjb3JlID49IDIwICYmIG5TY29yZSA8IDQwKSB7XG4gICAgICAgIHRoaXMubWV0ZXIubmF0aXZlRWxlbWVudC5zdHlsZS53aWR0aCA9IG5TY29yZSArICclJztcbiAgICAgICAgdGhpcy5jb2xvciA9ICdyZWQnO1xuICAgICAgICB0aGlzLmNvbXBsZXhpdHkgPSAn2LbYuduM2YEnO1xuICAgICAgfSBlbHNlIGlmIChuU2NvcmUgPj0gNDAgJiYgblNjb3JlIDwgNjApIHtcbiAgICAgICAgdGhpcy5tZXRlci5uYXRpdmVFbGVtZW50LnN0eWxlLndpZHRoID0gblNjb3JlICsgJyUnO1xuICAgICAgICB0aGlzLmNvbG9yID0gJ2dyZWVueWVsbG93JztcbiAgICAgICAgdGhpcy5jb21wbGV4aXR5ID0gJ9iu2YjYqCc7XG4gICAgICB9IGVsc2UgaWYgKG5TY29yZSA+PSA2MCAmJiBuU2NvcmUgPCA4MCkge1xuICAgICAgICB0aGlzLm1ldGVyLm5hdGl2ZUVsZW1lbnQuc3R5bGUud2lkdGggPSBuU2NvcmUgKyAnJSc7XG4gICAgICAgIHRoaXMuY29sb3IgPSAnbGlnaHRncmVlbic7XG4gICAgICAgIHRoaXMuY29tcGxleGl0eSA9ICfZgtmI24wnO1xuICAgICAgfSBlbHNlIGlmIChuU2NvcmUgPj0gODAgJiYgblNjb3JlIDw9IDEwMCkge1xuICAgICAgICB0aGlzLm1ldGVyLm5hdGl2ZUVsZW1lbnQuc3R5bGUud2lkdGggPSBuU2NvcmUgKyAnJSc7XG4gICAgICAgIHRoaXMuY29sb3IgPSAnZ3JlZW4nO1xuICAgICAgICB0aGlzLmNvbXBsZXhpdHkgPSAn2K7bjNmE24wg2YLZiNuMJztcbiAgICAgIH1cblxuICAgICAgdGhpcy5zY29yZSA9IG5TY29yZS50b1N0cmluZygpO1xuICAgICAgdGhpcy5tZXRlci5uYXRpdmVFbGVtZW50LnN0eWxlLndpZHRoID0gblNjb3JlICsgJyUnO1xuICAgICAgLy8gb1Njb3JlLmlubmVySFRNTCAgPSBuU2NvcmUgKyAnJSc7XG4gICAgICAvLyBvQ29tcGxleGl0eS5pbm5lckhUTUwgPSBzQ29tcGxleGl0eTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zY29yZSA9IG5TY29yZS50b1N0cmluZygpICsgJyUnO1xuICAgICAgLy8gdGhpcy5pbml0UHdkQ2hrKCk7XG4gICAgICAvLyBvU2NvcmUuaW5uZXJIVE1MID0gblNjb3JlICsgJyUnO1xuICAgICAgLy8gb0NvbXBsZXhpdHkuaW5uZXJIVE1MID0gc0NvbXBsZXhpdHk7XG4gICAgfVxuICB9XG5cbiAgc3RyUmV2ZXJzZShzdHIpIHtcbiAgICBsZXQgbmV3c3RyaW5nID0gJyc7XG4gICAgZm9yIChsZXQgcyA9IDA7IHMgPCBzdHIubGVuZ3RoOyBzKyspIHtcbiAgICAgIG5ld3N0cmluZyA9IHN0ci5jaGFyQXQocykgKyBuZXdzdHJpbmc7XG4gICAgfVxuICAgIHJldHVybiBuZXdzdHJpbmc7XG4gIH1cblxuICAvLyBpbml0UHdkQ2hrKCkge1xuICAvLyB0aGlzLnNjb3JlYmFyLm5hdGl2ZUVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uID0gJzAnO1xuICAvLyB9XG59XG4iXX0=