/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ChangeDetectorRef, Component, ElementRef, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { DataColumnViewType } from '../../models/tamin-data-column.model';
import { GenericRestService } from '../../services/generic-rest-service/generic-rest.service';
import { TaminDataGridConfiguration } from '../../helpers/tamin.data.grid.configuration/tamin.data.grid.configuration';
import { TaminPersianService } from '../../services/persian-service/tamin-persian.service';
import { OverlayService } from '../../services/overlay/overlay.service';
import { BreakpointObserver, Breakpoints } from '@angular/cdk/layout';
import { TaminRestService } from '../../services/tamin-rest-service/tamin-rest.service';
import { PersianNumberPipe } from '../../pipes/persian-number.pipe';
import { Error } from 'tslint/lib/error';
import { ConstantsService } from '../../services/constants.service';
export class TaminDataGridComponent {
    /**
     * @param {?} genericRestService
     * @param {?} changeDetectorRef
     * @param {?} taminRestService
     * @param {?} taminPersianService
     * @param {?} persianNumberPipe
     * @param {?} breakpointObserver
     * @param {?} constants
     * @param {?} overlayService
     */
    constructor(genericRestService, changeDetectorRef, taminRestService, taminPersianService, persianNumberPipe, breakpointObserver, constants, overlayService) {
        this.genericRestService = genericRestService;
        this.changeDetectorRef = changeDetectorRef;
        this.taminRestService = taminRestService;
        this.taminPersianService = taminPersianService;
        this.persianNumberPipe = persianNumberPipe;
        this.breakpointObserver = breakpointObserver;
        this.constants = constants;
        this.overlayService = overlayService;
        this.actionColumnCaption = 'عملیات';
        this.selectedDataItems = [];
        this.pagerSize = 5;
        this.id = '';
        this.loadDataOnInit = false;
        this.showLoadOverlay = true;
        this.showHover = false;
        this.pagerCurrentPage = 1;
        this.allowBreakPoints = true;
        this.itemSelect = new EventEmitter();
        this.itemAction = new EventEmitter();
        this.beforeRefreshData = new EventEmitter();
        this.afterRefreshData = new EventEmitter();
        this.refreshDataError = new EventEmitter();
        this.renderMode = 'desktop';
        this.hasError = false;
        this.loading = false;
        this.breakPoints = [Breakpoints.Small, Breakpoints.Handset];
        this._overlay = null;
    }
    /**
     * @param {?} data
     * @return {?}
     */
    set configuration(data) {
        if (data) {
            this.serviceUrl = data.serviceUrl;
            this.visibleColumns = data.visibleColumns;
            this.actionColumns = data.actionColumns;
            this.searchParams = data.searchParams;
            this.sortParams = data.sortParams;
            this.viewType = data.viewType;
            this.showActionColumn = data.showActionColumn;
            this.actionColumnCaption = data.actionColumnCaption;
            this.rowEditable = data.rowEditable;
            this.rowDeletable = data.rowDeletable;
            this.dataItems = data.dataItems;
            this.showFooter = data.showFooter;
            this.showPager = data.showPager;
            this.pagerSize = data.pagerSize;
            this.loadDataOnInit = data.loadDataOnInit;
            this.pagerCurrentPage = data.pagerCurrentPage;
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.errorMessage = this.constants.getNetworkErrorMessage();
        this.breakpointObserver
            .observe(this.breakPoints)
            .subscribe((/**
         * @param {?} state
         * @return {?}
         */
        (state) => {
            if (!this.allowBreakPoints) {
                return;
            }
            if (state.matches) {
                if (this.renderMode !== 'mobile') {
                    this.renderMode = 'mobile';
                }
            }
            else {
                if (this.renderMode !== 'desktop') {
                    this.renderMode = 'desktop';
                }
            }
        }));
        if (this.sortParams && this.sortParams.length !== 0) {
            this.sortColumnName = this.sortParams[0].property;
            this.sortColumnMethod = this.sortParams[0].direction;
        }
    }
    /**
     * @param {?=} showOverlay
     * @return {?}
     */
    refreshData(showOverlay = true) {
        return new Promise((/**
         * @param {?} resolve
         * @param {?} reject
         * @return {?}
         */
        (resolve, reject) => {
            if (this.loading) {
                return;
            }
            this.hasError = false;
            if (!this.serviceUrl || this.serviceUrl === '') {
                reject(new Error('ServiceUrl has not value'));
                return;
            }
            this.beforeRefreshData.emit();
            this.loading = true;
            if (this.showLoadOverlay && showOverlay) {
                if (this._overlay === null) {
                    this._overlay = this.overlayService.show(this.gridContainer.nativeElement);
                }
            }
            /** @type {?} */
            const sortParams = [];
            if (this.sortColumnName) {
                sortParams.push({
                    property: this.sortColumnName,
                    direction: this.sortColumnMethod
                });
            }
            if (!this.pagerSize || this.pagerSize <= 0) {
                this.pagerSize = 1000; // Max allowed
                this.taminRestService.getAll(this.serviceUrl, this.searchParams, sortParams)
                    .then((/**
                 * @param {?} value
                 * @return {?}
                 */
                value => {
                    if (this.showLoadOverlay && showOverlay && this._overlay !== null) {
                        this.overlayService.hide(this._overlay);
                        this._overlay = null;
                    }
                    this.loading = false;
                    if (value.data !== undefined && value.data == null) {
                        value.data.list = [];
                        value.data.total = 0;
                    }
                    this.dataItems = value.data.list;
                    this.totalRows = value.data.total;
                    this.totalPages = Math.ceil(this.totalRows / this.pagerSize);
                    this.pagerCurrentPage = this.totalPages > 0 ? 1 : 0;
                    this.afterRefreshData.emit();
                    resolve(value);
                }))
                    .catch((/**
                 * @param {?} reason
                 * @return {?}
                 */
                reason => {
                    if (this.showLoadOverlay && showOverlay && this._overlay !== null) {
                        this.overlayService.hide(this._overlay);
                        this._overlay = null;
                    }
                    this.dataItems = [];
                    this.loading = false;
                    this.hasError = true;
                    this.refreshDataError.emit(reason);
                    reject(reason);
                }));
            }
            else {
                this.taminRestService.getPage(this.serviceUrl, this.pagerCurrentPage, this.pagerSize, this.searchParams, sortParams)
                    .then((/**
                 * @param {?} value
                 * @return {?}
                 */
                value => {
                    if (this.showLoadOverlay && showOverlay && this._overlay !== null) {
                        this.overlayService.hide(this._overlay);
                        this._overlay = null;
                    }
                    this.loading = false;
                    this.dataItems = value.data.list;
                    this.totalRows = value.data.total;
                    this.totalPages = Math.ceil(this.totalRows / this.pagerSize);
                    this.afterRefreshData.emit();
                    resolve();
                }))
                    .catch((/**
                 * @param {?} reason
                 * @return {?}
                 */
                reason => {
                    if (this.showLoadOverlay && showOverlay && this._overlay !== null) {
                        this.overlayService.hide(this._overlay);
                        this._overlay = null;
                    }
                    this.dataItems = [];
                    this.loading = false;
                    this.hasError = true;
                    this.refreshDataError.emit(reason);
                    reject(reason);
                }));
            }
        }));
    }
    /**
     * @param {?} dataItem
     * @return {?}
     */
    onSelectItem(dataItem) {
        this.selectedDataItem = dataItem;
        this.itemSelect.emit(dataItem);
    }
    /**
     * @param {?} dataItem
     * @param {?} event
     * @return {?}
     */
    onItemCheckBoxClick(dataItem, event) {
        if (this.selectedDataItems.indexOf(dataItem) === -1 && event.target.checked) {
            this.selectedDataItems.push(dataItem);
        }
        if (!event.target.checked) {
            /** @type {?} */
            const index = this.selectedDataItems.indexOf(dataItem, 0);
            if (index > -1) {
                this.selectedDataItems.splice(index, 1);
            }
        }
    }
    /**
     * @param {?} dataItem
     * @param {?} actionCell
     * @return {?}
     */
    onActionClicked(dataItem, actionCell) {
        this.selectedDataItem = dataItem;
        this.itemAction.emit({ dataItem, actionCell });
    }
    /**
     * @param {?} pagerCurrentPage
     * @return {?}
     */
    onPagerPageChanged(pagerCurrentPage) {
        this.pagerCurrentPage = pagerCurrentPage;
        this.refreshData();
    }
    /**
     * @param {?} dataItem
     * @param {?} cell
     * @param {?} index
     * @return {?}
     */
    getDataItemString(dataItem, cell, index) {
        /** @type {?} */
        let result = dataItem;
        if (cell.columnViewType !== DataColumnViewType.RowNumber) {
            /** @type {?} */
            const fields = cell.columnName.split('.');
            for (let i = 0; i < fields.length; i++) {
                if (!result[fields[i]]) {
                    result = '';
                }
                else {
                    result = result[fields[i]];
                }
            }
        }
        switch (cell.columnViewType) {
            case DataColumnViewType.Label:
                return result;
            case DataColumnViewType.ThousandSeperated:
                /** @type {?} */
                const parts = result.toString().split('.');
                parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ',');
                return parts.join('.');
            case DataColumnViewType.RowNumber:
                return (index + 1 + (this.pagerSize * (this.pagerCurrentPage - 1))).toString();
            case DataColumnViewType.PersianDate:
                try {
                    /** @type {?} */
                    const date = new Date(result);
                    return this.taminPersianService.getPersianDate(date);
                }
                catch (e) {
                    return 'خطا در تبدیل تاریخ';
                }
            case DataColumnViewType.Custom:
                return cell.columnTranslator(result);
            case DataColumnViewType.CustomRow:
                return cell.columnTranslator(dataItem, cell.columnName);
        }
    }
    /**
     * @param {?} dataItem
     * @param {?} cell
     * @return {?}
     */
    getDataItemAction(dataItem, cell) {
        if (!cell.columnStyle) {
            return '';
        }
        /** @type {?} */
        const fields = cell.columnName.split('.');
        /** @type {?} */
        let result = dataItem;
        for (let i = 0; i < fields.length; i++) {
            if (!result[fields[i]]) {
                result = '-';
            }
            else {
                result = result[fields[i]];
            }
        }
        return cell.columnStyle(result);
    }
    /**
     * @private
     * @param {?} item
     * @param {?} column
     * @param {?} index
     * @return {?}
     */
    cellRendererSelector(item, column, index) {
        if (column.columnViewType === DataColumnViewType.RowNumber) {
            return this.getDataItemString(item[column.columnName], column, index);
        }
        if (this.cellRenderer) {
            /** @type {?} */
            const result = this.cellRenderer(item, column);
            if (result.handled) {
                return result.data;
            }
        }
        return this.getDataItemString(item, column, index);
    }
    /**
     * @param {?} item
     * @param {?} column
     * @param {?} i
     * @return {?}
     */
    generateContent(item, column, i) {
        if (/<\/?[a-z][\s\S]*>/i.test(item)) {
            return this.cellRendererSelector(encodeURIComponent(item), column, i);
        }
        return this.cellRendererSelector(item, column, i);
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        if (this.loadDataOnInit) {
            this.refreshData();
        }
    }
    /**
     * @param {?} event
     * @return {?}
     */
    onActionMenuItemClicked(event) {
        this.onSelectItem(event.item);
        this.itemAction.emit(event);
    }
    /**
     * @param {?} item
     * @param {?} column
     * @return {?}
     */
    getCellStylerResult(item, column) {
        return this.cellStyler ? this.cellStyler(item, column) : '';
    }
    /**
     * @param {?} item
     * @return {?}
     */
    getRowStylerResult(item) {
        return this.rowStyler ? this.rowStyler(item) : '';
    }
    /**
     * @param {?} item
     * @param {?} actionCell
     * @return {?}
     */
    actionRender(item, actionCell) {
        if (this.actionRenderer) {
            return this.actionRenderer(item, actionCell);
        }
        return actionCell;
    }
    /**
     * @param {?} column
     * @return {?}
     */
    onSort(column) {
        if (this.sortColumnName === column.columnName) {
            this.sortColumnMethod = this.sortColumnMethod === 'ASC' ? 'DESC' : 'ASC';
        }
        if (this.sortColumnName !== column.columnName) {
            this.sortColumnName = column.columnName;
            this.sortColumnMethod = 'ASC';
        }
        this.refreshData();
    }
}
TaminDataGridComponent.decorators = [
    { type: Component, args: [{
                selector: 'tamin-data-grid',
                template: "<div #gridContainer>\n  <div *ngIf=\"renderMode === 'desktop'\">\n    <div class=\"gridContainer\">\n      <div *ngIf=\"viewType === 'GridView'\" style=\"width: 100%;\">\n        <table class=\"desktop-table\">\n          <thead>\n          <tr>\n            <ng-container *ngFor=\"let column of visibleColumns\">\n              <ng-container *ngIf=\"column.columnSortable\">\n                <th (click)=\"onSort(column)\">\n                  <span>{{column.columnCaption}}</span>\n                  <i *ngIf=\"column.columnViewType !== 'RowNumber'\" class=\"sortable\"\n                     [class.icon-sort]=\"sortColumnName !== column.columnName\"\n                     [class.icon-sort-down]=\"sortColumnName === column.columnName && sortColumnMethod == 'ASC'\"\n                     [class.icon-sort-up]=\"sortColumnName === column.columnName && sortColumnMethod == 'DESC'\"></i>\n                </th>\n              </ng-container>\n              <ng-container *ngIf=\"!column.columnSortable\">\n                <th>\n                  <span>{{column.columnCaption}}</span>\n                </th>\n              </ng-container>\n            </ng-container>\n            <th *ngIf=\"showActionColumn\" style=\"text-align: center; cursor: auto\">{{actionColumnCaption}}</th>\n          </tr>\n          </thead>\n          <tbody>\n          <tr *ngIf=\"hasError\">\n            <td [attr.colspan]=\"visibleColumns.length + (showActionColumn ? 1 : 0)\">\n              <div class=\"alert alert-danger\" [innerHTML]=\"errorMessage\"></div>\n            </td>\n          </tr>\n          <tr *ngIf=\"dataItems && dataItems.length === 0 && !hasError\">\n            <td [attr.colspan]=\"visibleColumns.length + (showActionColumn ? 1 : 0)\">\n              <div class=\"alert alert-info\">\u0627\u0637\u0644\u0627\u0639\u0627\u062A\u06CC \u0628\u0631\u0627\u06CC \u0646\u0645\u0627\u06CC\u0634 \u0648\u062C\u0648\u062F \u0646\u062F\u0627\u0631\u062F</div>\n            </td>\n          </tr>\n          <tr *ngFor=\"let item of dataItems; let i = index\"\n              [class.row-data]=\"showHover\"\n              [class.selected]=\"item === selectedDataItem\"\n              [ngStyle]=\"getRowStylerResult(item)\">\n            <td *ngFor=\"let column of visibleColumns\"\n                [class.row-number-column]=\"column.columnViewType == 'RowNumber'\"\n                [ngStyle]=\"getCellStylerResult(item, column)\"\n                [innerHtml]=\"generateContent(item, column, i)\"\n                (click)=\"onSelectItem(item)\">\n            </td>\n            <td *ngIf=\"showActionColumn\" class=\"action-column\">\n              <tamin-data-grid-action-menu [dataItem]=\"item\" [actionColumns]=\"actionRender(item, actionColumns)\"\n                                           (menuItemClicked)=\"onActionMenuItemClicked($event)\"></tamin-data-grid-action-menu>\n            </td>\n          </tr>\n          </tbody>\n          <tfoot *ngIf=\"showPager\">\n          <tr>\n            <td [attr.colspan]=\"visibleColumns.length + (showActionColumn ? 1 : 0)\" style=\"text-align: -webkit-center;\">\n              <tamin-data-pager\n                [pagerSize]=\"pagerSize\"\n                [(pagerCurrentPage)]=\"pagerCurrentPage\"\n                [pagerTotal]=\"totalPages\"\n                (refreshData)=\"refreshData()\"\n                (pageChanged)=\"onPagerPageChanged($event)\">\n              </tamin-data-pager>\n            </td>\n          </tr>\n          </tfoot>\n        </table>\n      </div>\n    </div>\n  </div>\n  <div *ngIf=\"renderMode === 'mobile'\">\n    <table class=\"mobile-table\">\n      <tbody *ngIf=\"hasError\">\n      <tr>\n        <td [attr.colspan]=\"visibleColumns.length\">\n          <div class=\"alert alert-danger\">\u062E\u0637\u0627 \u062F\u0631 \u062F\u0631\u06CC\u0627\u0641\u062A \u0627\u0637\u0644\u0627\u0639\u0627\u062A</div>\n        </td>\n      </tr>\n      </tbody>\n      <tbody *ngIf=\"!hasError\">\n      <ng-container *ngFor=\"let item of dataItems; let i = index\">\n        <ng-container *ngFor=\"let column of visibleColumns\">\n          <tr [class.selected]=\"item === selectedDataItem\" (click)=\"onSelectItem(item)\">\n            <td [ngClass]=\"{'odd':i % 2 == 0, 'even':i % 2 != 0}\" [class.selected]=\"item === selectedDataItem\"\n                [ngStyle]=\"getRowStylerResult(item)\">{{column.columnCaption}}\n            </td>\n            <td\n              [ngClass]=\"{'odd':i % 2 == 0, 'even':i % 2 != 0}\"\n              [class.selected]=\"item === selectedDataItem\"\n              [ngStyle]=\"getCellStylerResult(item,column)\"\n              (click)=\"onSelectItem(item)\"\n              [innerHtml]=\"generateContent(item, column, i)\">\n            </td>\n          </tr>\n        </ng-container>\n        <tr *ngIf=\"showActionColumn\">\n          <td [ngClass]=\"{'odd':i % 2 == 0, 'even':i % 2 != 0}\" [class.selected]=\"item === selectedDataItem\"\n              [ngStyle]=\"getRowStylerResult(item)\">{{actionColumnCaption}}\n          </td>\n          <td [ngClass]=\"{'odd':i % 2 == 0, 'even':i % 2 != 0}\" [class.selected]=\"item === selectedDataItem\">\n            <tamin-data-grid-action-menu\n              [dataItem]=\"item\"\n              (dropdownClicked)=\"onSelectItem(item)\"\n              [actionColumns]=\"actionRender(item, actionColumns)\"\n              (menuItemClicked)=\"onActionMenuItemClicked($event)\">\n            </tamin-data-grid-action-menu>\n          </td>\n        </tr>\n      </ng-container>\n      <tr *ngIf=\"showPager\">\n        <td colspan=\"2\" style=\"text-align: -webkit-center\">\n          <tamin-data-pager\n            [pagerSize]=\"pagerSize\"\n            [(pagerCurrentPage)]=\"pagerCurrentPage\"\n            [pagerTotal]=\"totalPages\"\n            (pageChanged)=\"onPagerPageChanged($event)\"\n            (refreshData)=\"refreshData()\">\n          </tamin-data-pager>\n        </td>\n      </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n",
                styles: [".datagrid-checkbox{height:16px;vertical-align:middle}.gridContainer{position:relative;margin:3px}.fixed-col{position:absolute}.odd{background-color:#efefef}.even{background-color:#fff}.selected{background-color:#d1d1d1;font-weight:bolder}.action-column,.row-number-column{width:1%;white-space:nowrap;text-align:center}th{text-align:right;white-space:nowrap}th.sortable{cursor:pointer}th.sortable i{margin-right:5px}"]
            }] }
];
/** @nocollapse */
TaminDataGridComponent.ctorParameters = () => [
    { type: GenericRestService },
    { type: ChangeDetectorRef },
    { type: TaminRestService },
    { type: TaminPersianService },
    { type: PersianNumberPipe },
    { type: BreakpointObserver },
    { type: ConstantsService },
    { type: OverlayService }
];
TaminDataGridComponent.propDecorators = {
    configuration: [{ type: Input }],
    serviceUrl: [{ type: Input }],
    visibleColumns: [{ type: Input }],
    actionColumns: [{ type: Input }],
    searchParams: [{ type: Input }],
    sortParams: [{ type: Input }],
    viewType: [{ type: Input }],
    showActionColumn: [{ type: Input }],
    actionColumnCaption: [{ type: Input }],
    rowEditable: [{ type: Input }],
    rowDeletable: [{ type: Input }],
    multiSelectable: [{ type: Input }],
    dataItems: [{ type: Input }],
    selectedDataItem: [{ type: Input }],
    selectedDataItems: [{ type: Input }],
    showFooter: [{ type: Input }],
    showPager: [{ type: Input }],
    pagerSize: [{ type: Input }],
    id: [{ type: Input }],
    loadDataOnInit: [{ type: Input }],
    showLoadOverlay: [{ type: Input }],
    showHover: [{ type: Input }],
    pagerCurrentPage: [{ type: Input }],
    errorMessage: [{ type: Input }],
    allowBreakPoints: [{ type: Input }],
    itemSelect: [{ type: Output }],
    itemAction: [{ type: Output }],
    beforeRefreshData: [{ type: Output }],
    afterRefreshData: [{ type: Output }],
    refreshDataError: [{ type: Output }],
    gridContainer: [{ type: ViewChild, args: ['gridContainer',] }]
};
if (false) {
    /** @type {?} */
    TaminDataGridComponent.prototype.serviceUrl;
    /** @type {?} */
    TaminDataGridComponent.prototype.visibleColumns;
    /** @type {?} */
    TaminDataGridComponent.prototype.actionColumns;
    /** @type {?} */
    TaminDataGridComponent.prototype.searchParams;
    /** @type {?} */
    TaminDataGridComponent.prototype.sortParams;
    /** @type {?} */
    TaminDataGridComponent.prototype.viewType;
    /** @type {?} */
    TaminDataGridComponent.prototype.showActionColumn;
    /** @type {?} */
    TaminDataGridComponent.prototype.actionColumnCaption;
    /** @type {?} */
    TaminDataGridComponent.prototype.rowEditable;
    /** @type {?} */
    TaminDataGridComponent.prototype.rowDeletable;
    /** @type {?} */
    TaminDataGridComponent.prototype.multiSelectable;
    /** @type {?} */
    TaminDataGridComponent.prototype.dataItems;
    /** @type {?} */
    TaminDataGridComponent.prototype.selectedDataItem;
    /** @type {?} */
    TaminDataGridComponent.prototype.selectedDataItems;
    /** @type {?} */
    TaminDataGridComponent.prototype.showFooter;
    /** @type {?} */
    TaminDataGridComponent.prototype.showPager;
    /** @type {?} */
    TaminDataGridComponent.prototype.pagerSize;
    /** @type {?} */
    TaminDataGridComponent.prototype.id;
    /** @type {?} */
    TaminDataGridComponent.prototype.loadDataOnInit;
    /** @type {?} */
    TaminDataGridComponent.prototype.showLoadOverlay;
    /** @type {?} */
    TaminDataGridComponent.prototype.showHover;
    /** @type {?} */
    TaminDataGridComponent.prototype.pagerCurrentPage;
    /** @type {?} */
    TaminDataGridComponent.prototype.errorMessage;
    /** @type {?} */
    TaminDataGridComponent.prototype.allowBreakPoints;
    /** @type {?} */
    TaminDataGridComponent.prototype.itemSelect;
    /** @type {?} */
    TaminDataGridComponent.prototype.itemAction;
    /** @type {?} */
    TaminDataGridComponent.prototype.beforeRefreshData;
    /** @type {?} */
    TaminDataGridComponent.prototype.afterRefreshData;
    /** @type {?} */
    TaminDataGridComponent.prototype.refreshDataError;
    /** @type {?} */
    TaminDataGridComponent.prototype.gridContainer;
    /** @type {?} */
    TaminDataGridComponent.prototype.renderMode;
    /** @type {?} */
    TaminDataGridComponent.prototype.hasError;
    /** @type {?} */
    TaminDataGridComponent.prototype.sortColumnName;
    /** @type {?} */
    TaminDataGridComponent.prototype.sortColumnMethod;
    /** @type {?} */
    TaminDataGridComponent.prototype.cellRenderer;
    /** @type {?} */
    TaminDataGridComponent.prototype.actionRenderer;
    /** @type {?} */
    TaminDataGridComponent.prototype.cellStyler;
    /** @type {?} */
    TaminDataGridComponent.prototype.rowStyler;
    /** @type {?} */
    TaminDataGridComponent.prototype.loading;
    /** @type {?} */
    TaminDataGridComponent.prototype.breakPoints;
    /** @type {?} */
    TaminDataGridComponent.prototype.totalPages;
    /** @type {?} */
    TaminDataGridComponent.prototype.totalRows;
    /**
     * @type {?}
     * @private
     */
    TaminDataGridComponent.prototype._overlay;
    /**
     * @type {?}
     * @private
     */
    TaminDataGridComponent.prototype.genericRestService;
    /**
     * @type {?}
     * @private
     */
    TaminDataGridComponent.prototype.changeDetectorRef;
    /**
     * @type {?}
     * @private
     */
    TaminDataGridComponent.prototype.taminRestService;
    /**
     * @type {?}
     * @private
     */
    TaminDataGridComponent.prototype.taminPersianService;
    /**
     * @type {?}
     * @private
     */
    TaminDataGridComponent.prototype.persianNumberPipe;
    /** @type {?} */
    TaminDataGridComponent.prototype.breakpointObserver;
    /** @type {?} */
    TaminDataGridComponent.prototype.constants;
    /**
     * @type {?}
     * @private
     */
    TaminDataGridComponent.prototype.overlayService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFtaW4tZGF0YS1ncmlkLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL3RhbWluLWZyYW1ld29yay8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL3RhbWluLWRhdGEtZ3JpZC90YW1pbi1kYXRhLWdyaWQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQWdCLGlCQUFpQixFQUFFLFNBQVMsRUFBRSxVQUFVLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBVSxNQUFNLEVBQUUsU0FBUyxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQ3RJLE9BQU8sRUFBQyxrQkFBa0IsRUFBa0IsTUFBTSxzQ0FBc0MsQ0FBQztBQUV6RixPQUFPLEVBQUMsa0JBQWtCLEVBQUMsTUFBTSwwREFBMEQsQ0FBQztBQUM1RixPQUFPLEVBQUMsMEJBQTBCLEVBQUMsTUFBTSwyRUFBMkUsQ0FBQztBQUNySCxPQUFPLEVBQUMsbUJBQW1CLEVBQUMsTUFBTSxzREFBc0QsQ0FBQztBQUN6RixPQUFPLEVBQUMsY0FBYyxFQUFDLE1BQU0sd0NBQXdDLENBQUM7QUFDdEUsT0FBTyxFQUFDLGtCQUFrQixFQUFFLFdBQVcsRUFBa0IsTUFBTSxxQkFBcUIsQ0FBQztBQUNyRixPQUFPLEVBQUMsZ0JBQWdCLEVBQUMsTUFBTSxzREFBc0QsQ0FBQztBQUN0RixPQUFPLEVBQUMsaUJBQWlCLEVBQUMsTUFBTSxpQ0FBaUMsQ0FBQztBQUNsRSxPQUFPLEVBQUMsS0FBSyxFQUFDLE1BQU0sa0JBQWtCLENBQUM7QUFDdkMsT0FBTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sa0NBQWtDLENBQUM7QUFRbEUsTUFBTSxPQUFPLHNCQUFzQjs7Ozs7Ozs7Ozs7SUFrRWpDLFlBQ1Usa0JBQTJDLEVBQzNDLGlCQUFvQyxFQUNwQyxnQkFBa0MsRUFDbEMsbUJBQXdDLEVBQ3hDLGlCQUFvQyxFQUNyQyxrQkFBc0MsRUFDdEMsU0FBMkIsRUFDMUIsY0FBOEI7UUFQOUIsdUJB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b0NBQWlCOztJQUNqQixnREFBZ0M7O0lBQ2hDLGlEQUFnQzs7SUFDaEMsMkNBQTJCOztJQUMzQixrREFBOEI7O0lBQzlCLDhDQUE4Qjs7SUFDOUIsa0RBQWlDOztJQUNqQyw0Q0FBK0M7O0lBQy9DLDRDQUErQzs7SUFDL0MsbURBQXNEOztJQUN0RCxrREFBcUQ7O0lBQ3JELGtEQUFxRDs7SUFDckQsK0NBQXNEOztJQUN0RCw0Q0FBNkM7O0lBQzdDLDBDQUFpQjs7SUFDakIsZ0RBQXVCOztJQUN2QixrREFBaUM7O0lBQ2pDLDhDQUFvQzs7SUFDcEMsZ0RBQXlFOztJQUN6RSw0Q0FBa0M7O0lBQ2xDLDJDQUF5Qjs7SUFDekIseUNBQWdCOztJQUNoQiw2Q0FBbUU7O0lBQ25FLDRDQUFtQjs7SUFDbkIsMkNBQWtCOzs7OztJQUNsQiwwQ0FBd0I7Ozs7O0lBR3RCLG9EQUFtRDs7Ozs7SUFDbkQsbURBQTRDOzs7OztJQUM1QyxrREFBMEM7Ozs7O0lBQzFDLHFEQUFnRDs7Ozs7SUFDaEQsbURBQTRDOztJQUM1QyxvREFBNkM7O0lBQzdDLDJDQUFrQzs7Ozs7SUFDbEMsZ0RBQXNDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtBZnRlclZpZXdJbml0LCBDaGFuZ2VEZXRlY3RvclJlZiwgQ29tcG9uZW50LCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIElucHV0LCBPbkluaXQsIE91dHB1dCwgVmlld0NoaWxkfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7RGF0YUNvbHVtblZpZXdUeXBlLCBUYW1pbkRhdGFDb2x1bW59IGZyb20gJy4uLy4uL21vZGVscy90YW1pbi1kYXRhLWNvbHVtbi5tb2RlbCc7XG5pbXBvcnQge1RhbWluQWN0aW9uQ29sdW1ufSBmcm9tICcuLi8uLi9tb2RlbHMvdGFtaW4tYWN0aW9uLWNvbHVtbi5tb2RlbCc7XG5pbXBvcnQge0dlbmVyaWNSZXN0U2VydmljZX0gZnJvbSAnLi4vLi4vc2VydmljZXMvZ2VuZXJpYy1yZXN0LXNlcnZpY2UvZ2VuZXJpYy1yZXN0LnNlcnZpY2UnO1xuaW1wb3J0IHtUYW1pbkRhdGFHcmlkQ29uZmlndXJhdGlvbn0gZnJvbSAnLi4vLi4vaGVscGVycy90YW1pbi5kYXRhLmdyaWQuY29uZmlndXJhdGlvbi90YW1pbi5kYXRhLmdyaWQuY29uZmlndXJhdGlvbic7XG5pbXBvcnQge1RhbWluUGVyc2lhblNlcnZpY2V9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3BlcnNpYW4tc2VydmljZS90YW1pbi1wZXJzaWFuLnNlcnZpY2UnO1xuaW1wb3J0IHtPdmVybGF5U2VydmljZX0gZnJvbSAnLi4vLi4vc2VydmljZXMvb3ZlcmxheS9vdmVybGF5LnNlcnZpY2UnO1xuaW1wb3J0IHtCcmVha3BvaW50T2JzZXJ2ZXIsIEJyZWFrcG9pbnRzLCBCcmVha3BvaW50U3RhdGV9IGZyb20gJ0Bhbmd1bGFyL2Nkay9sYXlvdXQnO1xuaW1wb3J0IHtUYW1pblJlc3RTZXJ2aWNlfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy90YW1pbi1yZXN0LXNlcnZpY2UvdGFtaW4tcmVzdC5zZXJ2aWNlJztcbmltcG9ydCB7UGVyc2lhbk51bWJlclBpcGV9IGZyb20gJy4uLy4uL3BpcGVzL3BlcnNpYW4tbnVtYmVyLnBpcGUnO1xuaW1wb3J0IHtFcnJvcn0gZnJvbSAndHNsaW50L2xpYi9lcnJvcic7XG5pbXBvcnQge0NvbnN0YW50c1NlcnZpY2V9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2NvbnN0YW50cy5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndGFtaW4tZGF0YS1ncmlkJyxcbiAgdGVtcGxhdGVVcmw6ICcuL3RhbWluLWRhdGEtZ3JpZC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL3RhbWluLWRhdGEtZ3JpZC5jb21wb25lbnQuc2NzcyddLFxufSlcblxuZXhwb3J0IGNsYXNzIFRhbWluRGF0YUdyaWRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQge1xuICBASW5wdXQoKSBzZXQgY29uZmlndXJhdGlvbihkYXRhOiBUYW1pbkRhdGFHcmlkQ29uZmlndXJhdGlvbikge1xuICAgIGlmIChkYXRhKSB7XG4gICAgICB0aGlzLnNlcnZpY2VVcmwgPSBkYXRhLnNlcnZpY2VVcmw7XG4gICAgICB0aGlzLnZpc2libGVDb2x1bW5zID0gZGF0YS52aXNpYmxlQ29sdW1ucztcbiAgICAgIHRoaXMuYWN0aW9uQ29sdW1ucyA9IGRhdGEuYWN0aW9uQ29sdW1ucztcbiAgICAgIHRoaXMuc2VhcmNoUGFyYW1zID0gZGF0YS5zZWFyY2hQYXJhbXM7XG4gICAgICB0aGlzLnNvcnRQYXJhbXMgPSBkYXRhLnNvcnRQYXJhbXM7XG4gICAgICB0aGlzLnZpZXdUeXBlID0gZGF0YS52aWV3VHlwZTtcbiAgICAgIHRoaXMuc2hvd0FjdGlvbkNvbHVtbiA9IGRhdGEuc2hvd0FjdGlvbkNvbHVtbjtcbiAgICAgIHRoaXMuYWN0aW9uQ29sdW1uQ2FwdGlvbiA9IGRhdGEuYWN0aW9uQ29sdW1uQ2FwdGlvbjtcbiAgICAgIHRoaXMucm93RWRpdGFibGUgPSBkYXRhLnJvd0VkaXRhYmxlO1xuICAgICAgdGhpcy5yb3dEZWxldGFibGUgPSBkYXRhLnJvd0RlbGV0YWJsZTtcbiAgICAgIHRoaXMuZGF0YUl0ZW1zID0gZGF0YS5kYXRhSXRlbXM7XG4gICAgICB0aGlzLnNob3dGb290ZXIgPSBkYXRhLnNob3dGb290ZXI7XG4gICAgICB0aGlzLnNob3dQYWdlciA9IGRhdGEuc2hvd1BhZ2VyO1xuICAgICAgdGhpcy5wYWdlclNpemUgPSBkYXRhLnBhZ2VyU2l6ZTtcbiAgICAgIHRoaXMubG9hZERhdGFPbkluaXQgPSBkYXRhLmxvYWREYXRhT25Jbml0O1xuICAgICAgdGhpcy5wYWdlckN1cnJlbnRQYWdlID0gZGF0YS5wYWdlckN1cnJlbnRQYWdlO1xuICAgIH1cbiAgfVxuXG4gIEBJbnB1dCgpIHNlcnZpY2VVcmw6IHN0cmluZztcbiAgQElucHV0KCkgdmlzaWJsZUNvbHVtbnM6IFRhbWluRGF0YUNvbHVtbltdIHwgb2JqZWN0W107XG4gIEBJbnB1dCgpIGFjdGlvbkNvbHVtbnM6IFRhbWluQWN0aW9uQ29sdW1uW10gfCBvYmplY3RbXTtcbiAgQElucHV0KCkgc2VhcmNoUGFyYW1zOiBhbnlbXTtcbiAgQElucHV0KCkgc29ydFBhcmFtczogYW55W107XG4gIEBJbnB1dCgpIHZpZXdUeXBlOiBzdHJpbmc7XG4gIEBJbnB1dCgpIHNob3dBY3Rpb25Db2x1bW46IGJvb2xlYW47XG4gIEBJbnB1dCgpIGFjdGlvbkNvbHVtbkNhcHRpb24gPSAn2LnZhdmE24zYp9iqJztcbiAgQElucHV0KCkgcm93RWRpdGFibGU6IHN0cmluZztcbiAgQElucHV0KCkgcm93RGVsZXRhYmxlOiBzdHJpbmc7XG4gIEBJbnB1dCgpIG11bHRpU2VsZWN0YWJsZTogc3RyaW5nO1xuICBASW5wdXQoKSBkYXRhSXRlbXM6IGFueTtcbiAgQElucHV0KCkgc2VsZWN0ZWREYXRhSXRlbTogYW55O1xuICBASW5wdXQoKSBzZWxlY3RlZERhdGFJdGVtczogYW55W10gPSBbXTtcbiAgQElucHV0KCkgc2hvd0Zvb3Rlcjogc3RyaW5nO1xuICBASW5wdXQoKSBzaG93UGFnZXI6IGJvb2xlYW47XG4gIEBJbnB1dCgpIHBhZ2VyU2l6ZSA9IDU7XG4gIEBJbnB1dCgpIGlkID0gJyc7XG4gIEBJbnB1dCgpIGxvYWREYXRhT25Jbml0ID0gZmFsc2U7XG4gIEBJbnB1dCgpIHNob3dMb2FkT3ZlcmxheSA9IHRydWU7XG4gIEBJbnB1dCgpIHNob3dIb3ZlciA9IGZhbHNlO1xuICBASW5wdXQoKSBwYWdlckN1cnJlbnRQYWdlID0gMTtcbiAgQElucHV0KCkgZXJyb3JNZXNzYWdlOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGFsbG93QnJlYWtQb2ludHMgPSB0cnVlO1xuICBAT3V0cHV0KCkgaXRlbVNlbGVjdCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICBAT3V0cHV0KCkgaXRlbUFjdGlvbiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICBAT3V0cHV0KCkgYmVmb3JlUmVmcmVzaERhdGEgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcbiAgQE91dHB1dCgpIGFmdGVyUmVmcmVzaERhdGEgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcbiAgQE91dHB1dCgpIHJlZnJlc2hEYXRhRXJyb3IgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcbiAgQFZpZXdDaGlsZCgnZ3JpZENvbnRhaW5lcicpIGdyaWRDb250YWluZXI6IEVsZW1lbnRSZWY7XG4gIHJlbmRlck1vZGU6ICdkZXNrdG9wJyB8ICdtb2JpbGUnID0gJ2Rlc2t0b3AnO1xuICBoYXNFcnJvciA9IGZhbHNlO1xuICBzb3J0Q29sdW1uTmFtZTogc3RyaW5nO1xuICBzb3J0Q29sdW1uTWV0aG9kOiAnQVNDJyB8ICdERVNDJztcbiAgY2VsbFJlbmRlcmVyOiAoaXRlbSwgY29sdW1uKSA9PiBhbnk7XG4gIGFjdGlvblJlbmRlcmVyOiAoaXRlbTogYW55LCBhY3Rpb25DZWxsOiBBcnJheTxUYW1pbkFjdGlvbkNvbHVtbj4pID0+IGFueTtcbiAgY2VsbFN0eWxlcjogKGl0ZW0sIGNvbHVtbikgPT4gYW55O1xuICByb3dTdHlsZXI6IChpdGVtKSA9PiBhbnk7XG4gIGxvYWRpbmcgPSBmYWxzZTtcbiAgYnJlYWtQb2ludHM6IEFycmF5PGFueT4gPSBbQnJlYWtwb2ludHMuU21hbGwsIEJyZWFrcG9pbnRzLkhhbmRzZXRdO1xuICB0b3RhbFBhZ2VzOiBudW1iZXI7XG4gIHRvdGFsUm93czogbnVtYmVyO1xuICBwcml2YXRlIF9vdmVybGF5ID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGdlbmVyaWNSZXN0U2VydmljZTogR2VuZXJpY1Jlc3RTZXJ2aWNlPGFueT4sXG4gICAgcHJpdmF0ZSBjaGFuZ2VEZXRlY3RvclJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYsXG4gICAgcHJpdmF0ZSB0YW1pblJlc3RTZXJ2aWNlOiBUYW1pblJlc3RTZXJ2aWNlLFxuICAgIHByaXZhdGUgdGFtaW5QZXJzaWFuU2VydmljZTogVGFtaW5QZXJzaWFuU2VydmljZSxcbiAgICBwcml2YXRlIHBlcnNpYW5OdW1iZXJQaXBlOiBQZXJzaWFuTnVtYmVyUGlwZSxcbiAgICBwdWJsaWMgYnJlYWtwb2ludE9ic2VydmVyOiBCcmVha3BvaW50T2JzZXJ2ZXIsXG4gICAgcHVibGljIGNvbnN0YW50czogQ29uc3RhbnRzU2VydmljZSxcbiAgICBwcml2YXRlIG92ZXJsYXlTZXJ2aWNlOiBPdmVybGF5U2VydmljZSkge1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5lcnJvck1lc3NhZ2UgPSB0aGlzLmNvbnN0YW50cy5nZXROZXR3b3JrRXJyb3JNZXNzYWdlKCk7XG4gICAgdGhpcy5icmVha3BvaW50T2JzZXJ2ZXJcbiAgICAgIC5vYnNlcnZlKHRoaXMuYnJlYWtQb2ludHMpXG4gICAgICAuc3Vic2NyaWJlKChzdGF0ZTogQnJlYWtwb2ludFN0YXRlKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5hbGxvd0JyZWFrUG9pbnRzKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGF0ZS5tYXRjaGVzKSB7XG5cbiAgICAgICAgICBpZiAodGhpcy5yZW5kZXJNb2RlICE9PSAnbW9iaWxlJykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2RlID0gJ21vYmlsZSc7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh0aGlzLnJlbmRlck1vZGUgIT09ICdkZXNrdG9wJykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJNb2RlID0gJ2Rlc2t0b3AnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgaWYgKHRoaXMuc29ydFBhcmFtcyAmJiB0aGlzLnNvcnRQYXJhbXMubGVuZ3RoICE9PSAwKSB7XG4gICAgICB0aGlzLnNvcnRDb2x1bW5OYW1lID0gdGhpcy5zb3J0UGFyYW1zWzBdLnByb3BlcnR5O1xuICAgICAgdGhpcy5zb3J0Q29sdW1uTWV0aG9kID0gdGhpcy5zb3J0UGFyYW1zWzBdLmRpcmVjdGlvbjtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVmcmVzaERhdGEoc2hvd092ZXJsYXk6IGJvb2xlYW4gPSB0cnVlKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPGFueT4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgaWYgKHRoaXMubG9hZGluZykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLmhhc0Vycm9yID0gZmFsc2U7XG4gICAgICBpZiAoIXRoaXMuc2VydmljZVVybCB8fCB0aGlzLnNlcnZpY2VVcmwgPT09ICcnKSB7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1NlcnZpY2VVcmwgaGFzIG5vdCB2YWx1ZScpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdGhpcy5iZWZvcmVSZWZyZXNoRGF0YS5lbWl0KCk7XG4gICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgaWYgKHRoaXMuc2hvd0xvYWRPdmVybGF5ICYmIHNob3dPdmVybGF5KSB7XG4gICAgICAgIGlmICh0aGlzLl9vdmVybGF5ID09PSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5fb3ZlcmxheSA9IHRoaXMub3ZlcmxheVNlcnZpY2Uuc2hvdyh0aGlzLmdyaWRDb250YWluZXIubmF0aXZlRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHNvcnRQYXJhbXMgPSBbXTtcbiAgICAgIGlmICh0aGlzLnNvcnRDb2x1bW5OYW1lKSB7XG4gICAgICAgIHNvcnRQYXJhbXMucHVzaCh7XG4gICAgICAgICAgcHJvcGVydHk6IHRoaXMuc29ydENvbHVtbk5hbWUsXG4gICAgICAgICAgZGlyZWN0aW9uOiB0aGlzLnNvcnRDb2x1bW5NZXRob2RcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5wYWdlclNpemUgfHwgdGhpcy5wYWdlclNpemUgPD0gMCkge1xuICAgICAgICB0aGlzLnBhZ2VyU2l6ZSA9IDEwMDA7IC8vIE1heCBhbGxvd2VkXG4gICAgICAgIHRoaXMudGFtaW5SZXN0U2VydmljZS5nZXRBbGwodGhpcy5zZXJ2aWNlVXJsLCB0aGlzLnNlYXJjaFBhcmFtcywgc29ydFBhcmFtcylcbiAgICAgICAgICAudGhlbih2YWx1ZSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5zaG93TG9hZE92ZXJsYXkgJiYgc2hvd092ZXJsYXkgJiYgdGhpcy5fb3ZlcmxheSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICB0aGlzLm92ZXJsYXlTZXJ2aWNlLmhpZGUodGhpcy5fb3ZlcmxheSk7XG4gICAgICAgICAgICAgIHRoaXMuX292ZXJsYXkgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAodmFsdWUuZGF0YSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlLmRhdGEgPT0gbnVsbCkge1xuICAgICAgICAgICAgICB2YWx1ZS5kYXRhLmxpc3QgPSBbXTtcbiAgICAgICAgICAgICAgdmFsdWUuZGF0YS50b3RhbCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRhdGFJdGVtcyA9IHZhbHVlLmRhdGEubGlzdDtcbiAgICAgICAgICAgIHRoaXMudG90YWxSb3dzID0gdmFsdWUuZGF0YS50b3RhbDtcbiAgICAgICAgICAgIHRoaXMudG90YWxQYWdlcyA9IE1hdGguY2VpbCh0aGlzLnRvdGFsUm93cyAvIHRoaXMucGFnZXJTaXplKTtcbiAgICAgICAgICAgIHRoaXMucGFnZXJDdXJyZW50UGFnZSA9IHRoaXMudG90YWxQYWdlcyA+IDAgPyAxIDogMDtcbiAgICAgICAgICAgIHRoaXMuYWZ0ZXJSZWZyZXNoRGF0YS5lbWl0KCk7XG4gICAgICAgICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaChyZWFzb24gPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0xvYWRPdmVybGF5ICYmIHNob3dPdmVybGF5ICYmIHRoaXMuX292ZXJsYXkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgdGhpcy5vdmVybGF5U2VydmljZS5oaWRlKHRoaXMuX292ZXJsYXkpO1xuICAgICAgICAgICAgICB0aGlzLl9vdmVybGF5ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZGF0YUl0ZW1zID0gW107XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuaGFzRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5yZWZyZXNoRGF0YUVycm9yLmVtaXQocmVhc29uKTtcbiAgICAgICAgICAgIHJlamVjdChyZWFzb24pO1xuICAgICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50YW1pblJlc3RTZXJ2aWNlLmdldFBhZ2UodGhpcy5zZXJ2aWNlVXJsLCB0aGlzLnBhZ2VyQ3VycmVudFBhZ2UsIHRoaXMucGFnZXJTaXplLCB0aGlzLnNlYXJjaFBhcmFtcywgc29ydFBhcmFtcylcbiAgICAgICAgICAudGhlbih2YWx1ZSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5zaG93TG9hZE92ZXJsYXkgJiYgc2hvd092ZXJsYXkgJiYgdGhpcy5fb3ZlcmxheSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICB0aGlzLm92ZXJsYXlTZXJ2aWNlLmhpZGUodGhpcy5fb3ZlcmxheSk7XG4gICAgICAgICAgICAgIHRoaXMuX292ZXJsYXkgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmRhdGFJdGVtcyA9IHZhbHVlLmRhdGEubGlzdDtcbiAgICAgICAgICAgIHRoaXMudG90YWxSb3dzID0gdmFsdWUuZGF0YS50b3RhbDtcbiAgICAgICAgICAgIHRoaXMudG90YWxQYWdlcyA9IE1hdGguY2VpbCh0aGlzLnRvdGFsUm93cyAvIHRoaXMucGFnZXJTaXplKTtcbiAgICAgICAgICAgIHRoaXMuYWZ0ZXJSZWZyZXNoRGF0YS5lbWl0KCk7XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2gocmVhc29uID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dMb2FkT3ZlcmxheSAmJiBzaG93T3ZlcmxheSAmJiB0aGlzLl9vdmVybGF5ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgIHRoaXMub3ZlcmxheVNlcnZpY2UuaGlkZSh0aGlzLl9vdmVybGF5KTtcbiAgICAgICAgICAgICAgdGhpcy5fb3ZlcmxheSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRhdGFJdGVtcyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmhhc0Vycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaERhdGFFcnJvci5lbWl0KHJlYXNvbik7XG4gICAgICAgICAgICByZWplY3QocmVhc29uKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIG9uU2VsZWN0SXRlbShkYXRhSXRlbTogYW55KTogdm9pZCB7XG4gICAgdGhpcy5zZWxlY3RlZERhdGFJdGVtID0gZGF0YUl0ZW07XG4gICAgdGhpcy5pdGVtU2VsZWN0LmVtaXQoZGF0YUl0ZW0pO1xuICB9XG5cbiAgb25JdGVtQ2hlY2tCb3hDbGljayhkYXRhSXRlbTogYW55LCBldmVudDogYW55KTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWREYXRhSXRlbXMuaW5kZXhPZihkYXRhSXRlbSkgPT09IC0xICYmIGV2ZW50LnRhcmdldC5jaGVja2VkKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkRGF0YUl0ZW1zLnB1c2goZGF0YUl0ZW0pO1xuICAgIH1cbiAgICBpZiAoIWV2ZW50LnRhcmdldC5jaGVja2VkKSB7XG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMuc2VsZWN0ZWREYXRhSXRlbXMuaW5kZXhPZihkYXRhSXRlbSwgMCk7XG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICB0aGlzLnNlbGVjdGVkRGF0YUl0ZW1zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cblxuICBvbkFjdGlvbkNsaWNrZWQoZGF0YUl0ZW06IGFueSwgYWN0aW9uQ2VsbDogVGFtaW5BY3Rpb25Db2x1bW4pOiB2b2lkIHtcbiAgICB0aGlzLnNlbGVjdGVkRGF0YUl0ZW0gPSBkYXRhSXRlbTtcbiAgICB0aGlzLml0ZW1BY3Rpb24uZW1pdCh7ZGF0YUl0ZW0sIGFjdGlvbkNlbGx9KTtcbiAgfVxuXG4gIG9uUGFnZXJQYWdlQ2hhbmdlZChwYWdlckN1cnJlbnRQYWdlOiBudW1iZXIpIHtcbiAgICB0aGlzLnBhZ2VyQ3VycmVudFBhZ2UgPSBwYWdlckN1cnJlbnRQYWdlO1xuICAgIHRoaXMucmVmcmVzaERhdGEoKTtcbiAgfVxuXG4gIGdldERhdGFJdGVtU3RyaW5nKGRhdGFJdGVtOiBhbnksIGNlbGw6IFRhbWluRGF0YUNvbHVtbiwgaW5kZXg6IG51bWJlcik6IHN0cmluZyB7XG4gICAgbGV0IHJlc3VsdCA9IGRhdGFJdGVtO1xuICAgIGlmIChjZWxsLmNvbHVtblZpZXdUeXBlICE9PSBEYXRhQ29sdW1uVmlld1R5cGUuUm93TnVtYmVyKSB7XG4gICAgICBjb25zdCBmaWVsZHMgPSBjZWxsLmNvbHVtbk5hbWUuc3BsaXQoJy4nKTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICghcmVzdWx0W2ZpZWxkc1tpXV0pIHtcbiAgICAgICAgICByZXN1bHQgPSAnJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQgPSByZXN1bHRbZmllbGRzW2ldXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBzd2l0Y2ggKGNlbGwuY29sdW1uVmlld1R5cGUpIHtcbiAgICAgIGNhc2UgRGF0YUNvbHVtblZpZXdUeXBlLkxhYmVsIDpcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIGNhc2UgRGF0YUNvbHVtblZpZXdUeXBlLlRob3VzYW5kU2VwZXJhdGVkIDpcbiAgICAgICAgY29uc3QgcGFydHMgPSByZXN1bHQudG9TdHJpbmcoKS5zcGxpdCgnLicpO1xuICAgICAgICBwYXJ0c1swXSA9IHBhcnRzWzBdLnJlcGxhY2UoL1xcQig/PShcXGR7M30pKyg/IVxcZCkpL2csICcsJyk7XG4gICAgICAgIHJldHVybiBwYXJ0cy5qb2luKCcuJyk7XG4gICAgICBjYXNlIERhdGFDb2x1bW5WaWV3VHlwZS5Sb3dOdW1iZXIgOlxuICAgICAgICByZXR1cm4gKGluZGV4ICsgMSArICh0aGlzLnBhZ2VyU2l6ZSAqICh0aGlzLnBhZ2VyQ3VycmVudFBhZ2UgLSAxKSkpLnRvU3RyaW5nKCk7XG4gICAgICBjYXNlIERhdGFDb2x1bW5WaWV3VHlwZS5QZXJzaWFuRGF0ZSA6XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHJlc3VsdCk7XG4gICAgICAgICAgcmV0dXJuIHRoaXMudGFtaW5QZXJzaWFuU2VydmljZS5nZXRQZXJzaWFuRGF0ZShkYXRlKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIHJldHVybiAn2K7Yt9inINiv2LEg2KrYqNiv24zZhCDYqtin2LHbjNiuJztcbiAgICAgICAgfVxuICAgICAgY2FzZSBEYXRhQ29sdW1uVmlld1R5cGUuQ3VzdG9tOlxuICAgICAgICByZXR1cm4gY2VsbC5jb2x1bW5UcmFuc2xhdG9yKHJlc3VsdCk7XG4gICAgICBjYXNlIERhdGFDb2x1bW5WaWV3VHlwZS5DdXN0b21Sb3c6XG4gICAgICAgIHJldHVybiBjZWxsLmNvbHVtblRyYW5zbGF0b3IoZGF0YUl0ZW0sIGNlbGwuY29sdW1uTmFtZSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0RGF0YUl0ZW1BY3Rpb24oZGF0YUl0ZW06IGFueSwgY2VsbDogVGFtaW5EYXRhQ29sdW1uKTogc3RyaW5nIHtcbiAgICBpZiAoIWNlbGwuY29sdW1uU3R5bGUpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgY29uc3QgZmllbGRzID0gY2VsbC5jb2x1bW5OYW1lLnNwbGl0KCcuJyk7XG4gICAgbGV0IHJlc3VsdCA9IGRhdGFJdGVtO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmllbGRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIXJlc3VsdFtmaWVsZHNbaV1dKSB7XG4gICAgICAgIHJlc3VsdCA9ICctJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdFtmaWVsZHNbaV1dO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2VsbC5jb2x1bW5TdHlsZShyZXN1bHQpO1xuICB9XG5cbiAgcHJpdmF0ZSBjZWxsUmVuZGVyZXJTZWxlY3RvcihpdGVtOiBhbnksIGNvbHVtbjogVGFtaW5EYXRhQ29sdW1uLCBpbmRleDogbnVtYmVyKSB7XG4gICAgaWYgKGNvbHVtbi5jb2x1bW5WaWV3VHlwZSA9PT0gRGF0YUNvbHVtblZpZXdUeXBlLlJvd051bWJlcikge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0RGF0YUl0ZW1TdHJpbmcoaXRlbVtjb2x1bW4uY29sdW1uTmFtZV0sIGNvbHVtbiwgaW5kZXgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5jZWxsUmVuZGVyZXIpIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuY2VsbFJlbmRlcmVyKGl0ZW0sIGNvbHVtbik7XG4gICAgICBpZiAocmVzdWx0LmhhbmRsZWQpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5nZXREYXRhSXRlbVN0cmluZyhpdGVtLCBjb2x1bW4sIGluZGV4KTtcbiAgfVxuXG4gIGdlbmVyYXRlQ29udGVudChpdGVtLCBjb2x1bW4sIGkpOiBhbnkge1xuICAgIGlmICgvPFxcLz9bYS16XVtcXHNcXFNdKj4vaS50ZXN0KGl0ZW0pKSB7XG4gICAgICByZXR1cm4gdGhpcy5jZWxsUmVuZGVyZXJTZWxlY3RvcihlbmNvZGVVUklDb21wb25lbnQoaXRlbSksIGNvbHVtbiwgaSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmNlbGxSZW5kZXJlclNlbGVjdG9yKGl0ZW0sIGNvbHVtbiwgaSk7XG4gIH1cblxuICBuZ0FmdGVyVmlld0luaXQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMubG9hZERhdGFPbkluaXQpIHtcbiAgICAgIHRoaXMucmVmcmVzaERhdGEoKTtcbiAgICB9XG4gIH1cblxuICBvbkFjdGlvbk1lbnVJdGVtQ2xpY2tlZChldmVudDogYW55KSB7XG4gICAgdGhpcy5vblNlbGVjdEl0ZW0oZXZlbnQuaXRlbSk7XG4gICAgdGhpcy5pdGVtQWN0aW9uLmVtaXQoZXZlbnQpO1xuICB9XG5cbiAgZ2V0Q2VsbFN0eWxlclJlc3VsdChpdGVtLCBjb2x1bW4pIHtcbiAgICByZXR1cm4gdGhpcy5jZWxsU3R5bGVyID8gdGhpcy5jZWxsU3R5bGVyKGl0ZW0sIGNvbHVtbikgOiAnJztcbiAgfVxuXG4gIGdldFJvd1N0eWxlclJlc3VsdChpdGVtKSB7XG4gICAgcmV0dXJuIHRoaXMucm93U3R5bGVyID8gdGhpcy5yb3dTdHlsZXIoaXRlbSkgOiAnJztcbiAgfVxuXG4gIGFjdGlvblJlbmRlcihpdGVtOiBhbnksIGFjdGlvbkNlbGw6IEFycmF5PGFueT4pIHtcbiAgICBpZiAodGhpcy5hY3Rpb25SZW5kZXJlcikge1xuICAgICAgcmV0dXJuIHRoaXMuYWN0aW9uUmVuZGVyZXIoaXRlbSwgYWN0aW9uQ2VsbCk7XG4gICAgfVxuICAgIHJldHVybiBhY3Rpb25DZWxsO1xuICB9XG5cbiAgb25Tb3J0KGNvbHVtbjogVGFtaW5EYXRhQ29sdW1uKSB7XG4gICAgaWYgKHRoaXMuc29ydENvbHVtbk5hbWUgPT09IGNvbHVtbi5jb2x1bW5OYW1lKSB7XG4gICAgICB0aGlzLnNvcnRDb2x1bW5NZXRob2QgPSB0aGlzLnNvcnRDb2x1bW5NZXRob2QgPT09ICdBU0MnID8gJ0RFU0MnIDogJ0FTQyc7XG4gICAgfVxuICAgIGlmICh0aGlzLnNvcnRDb2x1bW5OYW1lICE9PSBjb2x1bW4uY29sdW1uTmFtZSkge1xuICAgICAgdGhpcy5zb3J0Q29sdW1uTmFtZSA9IGNvbHVtbi5jb2x1bW5OYW1lO1xuICAgICAgdGhpcy5zb3J0Q29sdW1uTWV0aG9kID0gJ0FTQyc7XG4gICAgfVxuICAgIHRoaXMucmVmcmVzaERhdGEoKTtcbiAgfVxufVxuIl19