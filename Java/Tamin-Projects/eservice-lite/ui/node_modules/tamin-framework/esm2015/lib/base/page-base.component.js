/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { ChangeDetectorRef, Component, ElementRef, Injector, Input } from '@angular/core';
import { OverlayService } from '../services/overlay/overlay.service';
import { TaminRestService } from '../services/tamin-rest-service/tamin-rest.service';
import { TaminSecurityService } from '../services/tamin-security/tamin-security.service';
import { PersianDateTimePipe } from '../pipes/persian-date-time.pipe';
import { PersianNumberPipe } from '../pipes/persian-number.pipe';
import { Router } from '@angular/router';
import { FormBuilder } from '@angular/forms';
import { ConstantsService } from '../services/constants.service';
export class TaminPageBaseComponent {
    /**
     * @param {?} injector
     */
    constructor(injector) {
        this.injector = injector;
        this.overlays = [];
        this.isModal = false;
        this._overlayService = injector.get(OverlayService);
        this._restService = injector.get(TaminRestService);
        this._securityService = injector.get(TaminSecurityService);
        this._persianDateTime = injector.get(PersianDateTimePipe);
        this._persianNumberPipe = injector.get(PersianNumberPipe);
        this._router = injector.get(Router);
        this._formBuilder = injector.get(FormBuilder);
        this._host = injector.get(ElementRef);
        this._changeDetectorRef = injector.get(ChangeDetectorRef);
        this._constants = injector.get(ConstantsService);
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set visible(val) {
        this._host.nativeElement.style.display = val ? 'block' : 'none';
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        window.scrollTo(0, 0);
        this.internalInitialize();
        this.initializePage();
    }
    /**
     * @param {?} val
     * @return {?}
     */
    set title(val) {
        this._title = val;
        document.title = 'سازمان تامین اجتماعی' + ' - ' + this._title;
    }
    /**
     * @return {?}
     */
    get title() {
        return this._title;
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.overlays.forEach((/**
         * @param {?} item
         * @return {?}
         */
        (item) => {
            this._overlayService.hide(item.overlay);
        }));
        this.destroyPage();
        alertify.closeAll();
    }
    /**
     * @return {?}
     */
    get restService() {
        return this._restService;
    }
    /**
     * @return {?}
     */
    get constants() {
        return this._constants;
    }
    /**
     * @return {?}
     */
    get formBuilder() {
        return this._formBuilder;
    }
    // get currentUser(): any {
    //   return this._securityService.currentUser;
    // }
    /**
     * @return {?}
     */
    get changeDetectorRef() {
        return this._changeDetectorRef;
    }
    /**
     * @return {?}
     */
    get securityService() {
        return this._securityService;
    }
    /**
     * @param {?} date
     * @return {?}
     */
    getPersianDate(date) {
        try {
            return this._persianDateTime.transform(new Date(date));
        }
        catch (_a) {
            return 'تاریخ نادرست';
        }
    }
    /**
     * @param {?} path
     * @return {?}
     */
    redirectTo(path) {
        this._router.navigate([path]);
    }
    /**
     * @param {?} title
     * @param {?} message
     * @param {?=} callback
     * @return {?}
     */
    showInfoMessageBox(title, message, callback = null) {
        if (callback) {
            alertify.alert(title, message, callback);
        }
        else {
            alertify.alert(title, message);
        }
    }
    /**
     * @param {?} title
     * @param {?} message
     * @param {?=} callback
     * @return {?}
     */
    showErrorMessageBox(title, message, callback = null) {
        /** @type {?} */
        const theTitle = `<span style="color: red">${title}</span>`;
        if (callback) {
            alertify.alert(theTitle, message, callback);
        }
        else {
            alertify.alert(theTitle, message);
        }
    }
    /**
     * @param {?} title
     * @param {?} message
     * @param {?} yesCallback
     * @param {?} noCallback
     * @return {?}
     */
    showQuestionBox(title, message, yesCallback, noCallback) {
        alertify.confirm(title, message, yesCallback, noCallback)
            .set({
            labels: { ok: 'بلی', cancel: 'خیر' }
        });
    }
    /**
     * @param {?} title
     * @param {?} message
     * @param {?} retryCallback
     * @param {?} cancelCallback
     * @return {?}
     */
    showRetryBox(title, message, retryCallback, cancelCallback) {
        alertify.confirm(title, message, retryCallback, cancelCallback)
            .set({
            labels: { ok: 'تلاش مجدد', cancel: 'انصراف' },
            'closable': false
        });
    }
    /**
     * @param {?} str
     * @return {?}
     */
    getPersianNumber(str) {
        return this._persianNumberPipe.transform(str);
    }
    /**
     * @protected
     * @return {?}
     */
    initializePage() {
    }
    /**
     * @protected
     * @return {?}
     */
    destroyPage() {
    }
    /**
     * @param {?=} element
     * @return {?}
     */
    showOverlay(element = null) {
        if (this.overlays.findIndex((/**
         * @param {?} c
         * @return {?}
         */
        c => c.overlay === element)) >= 0) {
            return;
        }
        /** @type {?} */
        const overlay = this._overlayService.show(element);
        /** @type {?} */
        const id = (new Date()).getTime();
        this.overlays.push({
            overlay: overlay,
            id: id.toString()
        });
        return id.toString();
    }
    /**
     * @param {?} message
     * @param {?=} element
     * @return {?}
     */
    showOverlayWithMessage(message, element = null) {
        if (this.overlays.findIndex((/**
         * @param {?} c
         * @return {?}
         */
        c => c.overlay === element)) >= 0) {
            return;
        }
        /** @type {?} */
        const overlay = this._overlayService.showMessage(message, element);
        /** @type {?} */
        const id = (new Date()).getTime();
        this.overlays.push({
            overlay: overlay,
            id: id.toString()
        });
        return id.toString();
    }
    /**
     * @param {?} id
     * @return {?}
     */
    hideOverlay(id) {
        /** @type {?} */
        const tmp = this.overlays.find((/**
         * @param {?} c
         * @return {?}
         */
        c => c.id === id));
        if (tmp) {
            this._overlayService.hide(tmp.overlay);
        }
        /** @type {?} */
        const index = this.overlays.findIndex((/**
         * @param {?} c
         * @return {?}
         */
        c => c.id === id));
        this.overlays.splice(index, 1);
    }
    /**
     * @private
     * @return {?}
     */
    internalInitialize() {
    }
    /**
     * @protected
     * @return {?}
     */
    loadPageData() {
    }
    /**
     * @return {?}
     */
    onTour() {
        introJs().setOptions({
            'nextLabel': 'بعد',
            'prevLabel': 'قبل',
            'skipLabel': 'خروج',
            'doneLabel': 'اتمام'
        }).start();
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        setTimeout((/**
         * @return {?}
         */
        () => this.loadPageData()), 0);
    }
    /**
     * @return {?}
     */
    openModal() {
    }
    /**
     * @param {?} form
     * @return {?}
     */
    markFormGroupAsTouched(form) {
        ((/** @type {?} */ (Object))).values(form.controls).forEach((/**
         * @param {?} control
         * @return {?}
         */
        control => control.markAsTouched()));
    }
    /**
     * @return {?}
     */
    ngAfterContentChecked() {
        this._changeDetectorRef.detectChanges();
    }
}
TaminPageBaseComponent.decorators = [
    { type: Component, args: [{
                selector: 'tamin-page-base-component',
                template: ''
            }] }
];
/** @nocollapse */
TaminPageBaseComponent.ctorParameters = () => [
    { type: Injector }
];
TaminPageBaseComponent.propDecorators = {
    isModal: [{ type: Input }],
    visible: [{ type: Input }]
};
if (false) {
    /**
     * @type {?}
     * @private
     */
    TaminPageBaseComponent.prototype._title;
    /**
     * @type {?}
     * @private
     */
    TaminPageBaseComponent.prototype.overlays;
    /**
     * @type {?}
     * @private
     */
    TaminPageBaseComponent.prototype._overlayService;
    /**
     * @type {?}
     * @private
     */
    TaminPageBaseComponent.prototype._restService;
    /**
     * @type {?}
     * @private
     */
    TaminPageBaseComponent.prototype._securityService;
    /**
     * @type {?}
     * @private
     */
    TaminPageBaseComponent.prototype._persianDateTime;
    /**
     * @type {?}
     * @private
     */
    TaminPageBaseComponent.prototype._persianNumberPipe;
    /**
     * @type {?}
     * @private
     */
    TaminPageBaseComponent.prototype._router;
    /**
     * @type {?}
     * @private
     */
    TaminPageBaseComponent.prototype._constants;
    /**
     * @type {?}
     * @private
     */
    TaminPageBaseComponent.prototype._formBuilder;
    /**
     * @type {?}
     * @private
     */
    TaminPageBaseComponent.prototype._host;
    /**
     * @type {?}
     * @private
     */
    TaminPageBaseComponent.prototype._changeDetectorRef;
    /** @type {?} */
    TaminPageBaseComponent.prototype.isModal;
    /**
     * @type {?}
     * @private
     */
    TaminPageBaseComponent.prototype.injector;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnZS1iYXNlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL3RhbWluLWZyYW1ld29yay8iLCJzb3VyY2VzIjpbImxpYi9iYXNlL3BhZ2UtYmFzZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFHTCxpQkFBaUIsRUFDakIsU0FBUyxFQUNULFVBQVUsRUFDVixRQUFRLEVBQ1IsS0FBSyxFQUdOLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBQyxjQUFjLEVBQUMsTUFBTSxxQ0FBcUMsQ0FBQztBQUNuRSxPQUFPLEVBQUMsZ0JBQWdCLEVBQUMsTUFBTSxtREFBbUQsQ0FBQztBQUNuRixPQUFPLEVBQUMsb0JBQW9CLEVBQUMsTUFBTSxtREFBbUQsQ0FBQztBQUN2RixPQUFPLEVBQUMsbUJBQW1CLEVBQUMsTUFBTSxpQ0FBaUMsQ0FBQztBQUNwRSxPQUFPLEVBQUMsaUJBQWlCLEVBQUMsTUFBTSw4QkFBOEIsQ0FBQztBQUMvRCxPQUFPLEVBQUMsTUFBTSxFQUFDLE1BQU0saUJBQWlCLENBQUM7QUFDdkMsT0FBTyxFQUFDLFdBQVcsRUFBWSxNQUFNLGdCQUFnQixDQUFDO0FBQ3RELE9BQU8sRUFBQyxnQkFBZ0IsRUFBQyxNQUFNLCtCQUErQixDQUFDO0FBVS9ELE1BQU0sT0FBTyxzQkFBc0I7Ozs7SUFtQmpDLFlBQW9CLFFBQWtCO1FBQWxCLGFBQVEsR0FBUixRQUFRLENBQVU7UUFqQjlCLGFBQVEsR0FBRyxFQUFFLENBQUM7UUFXYixZQUFPLEdBQUcsS0FBSyxDQUFDO1FBT3ZCLElBQUksQ0FBQyxlQUFlLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUNwRCxJQUFJLENBQUMsWUFBWSxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUNuRCxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxvQkFBb0IsQ0FBQyxD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Ozs7O1FBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLEVBQUMsQ0FBQztJQUNsRixDQUFDOzs7O0lBRUQscUJBQXFCO1FBQ25CLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUMxQyxDQUFDOzs7WUF6TUYsU0FBUyxTQUFDO2dCQUNULFFBQVEsRUFBRSwyQkFBMkI7Z0JBQ3JDLFFBQVEsRUFBRSxFQUFFO2FBQ2I7Ozs7WUFyQkMsUUFBUTs7O3NCQW1DUCxLQUFLO3NCQUVMLEtBQUs7Ozs7Ozs7SUFkTix3Q0FBdUI7Ozs7O0lBQ3ZCLDBDQUFzQjs7Ozs7SUFDdEIsaURBQXdDOzs7OztJQUN4Qyw4Q0FBdUM7Ozs7O0lBQ3ZDLGtEQUErQzs7Ozs7SUFDL0Msa0RBQThDOzs7OztJQUM5QyxvREFBOEM7Ozs7O0lBQzlDLHlDQUF3Qjs7Ozs7SUFDeEIsNENBQXFDOzs7OztJQUNyQyw4Q0FBa0M7Ozs7O0lBQ2xDLHVDQUEwQjs7Ozs7SUFDMUIsb0RBQThDOztJQUM5Qyx5Q0FBeUI7Ozs7O0lBTWIsMENBQTBCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBBZnRlckNvbnRlbnRDaGVja2VkLFxyXG4gIEFmdGVyVmlld0luaXQsXHJcbiAgQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgQ29tcG9uZW50LFxyXG4gIEVsZW1lbnRSZWYsXHJcbiAgSW5qZWN0b3IsXHJcbiAgSW5wdXQsXHJcbiAgT25EZXN0cm95LFxyXG4gIE9uSW5pdFxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge092ZXJsYXlTZXJ2aWNlfSBmcm9tICcuLi9zZXJ2aWNlcy9vdmVybGF5L292ZXJsYXkuc2VydmljZSc7XHJcbmltcG9ydCB7VGFtaW5SZXN0U2VydmljZX0gZnJvbSAnLi4vc2VydmljZXMvdGFtaW4tcmVzdC1zZXJ2aWNlL3RhbWluLXJlc3Quc2VydmljZSc7XHJcbmltcG9ydCB7VGFtaW5TZWN1cml0eVNlcnZpY2V9IGZyb20gJy4uL3NlcnZpY2VzL3RhbWluLXNlY3VyaXR5L3RhbWluLXNlY3VyaXR5LnNlcnZpY2UnO1xyXG5pbXBvcnQge1BlcnNpYW5EYXRlVGltZVBpcGV9IGZyb20gJy4uL3BpcGVzL3BlcnNpYW4tZGF0ZS10aW1lLnBpcGUnO1xyXG5pbXBvcnQge1BlcnNpYW5OdW1iZXJQaXBlfSBmcm9tICcuLi9waXBlcy9wZXJzaWFuLW51bWJlci5waXBlJztcclxuaW1wb3J0IHtSb3V0ZXJ9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XHJcbmltcG9ydCB7Rm9ybUJ1aWxkZXIsIEZvcm1Hcm91cH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xyXG5pbXBvcnQge0NvbnN0YW50c1NlcnZpY2V9IGZyb20gJy4uL3NlcnZpY2VzL2NvbnN0YW50cy5zZXJ2aWNlJztcclxuXHJcbmRlY2xhcmUgdmFyIGFsZXJ0aWZ5OiBhbnk7XHJcblxyXG5kZWNsYXJlIGxldCBpbnRyb0pzOiBhbnk7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ3RhbWluLXBhZ2UtYmFzZS1jb21wb25lbnQnLFxyXG4gIHRlbXBsYXRlOiAnJyxcclxufSlcclxuZXhwb3J0IGNsYXNzIFRhbWluUGFnZUJhc2VDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSwgQWZ0ZXJWaWV3SW5pdCwgQWZ0ZXJDb250ZW50Q2hlY2tlZCB7XHJcbiAgcHJpdmF0ZSBfdGl0bGU6IHN0cmluZztcclxuICBwcml2YXRlIG92ZXJsYXlzID0gW107XHJcbiAgcHJpdmF0ZSBfb3ZlcmxheVNlcnZpY2U6IE92ZXJsYXlTZXJ2aWNlO1xyXG4gIHByaXZhdGUgX3Jlc3RTZXJ2aWNlOiBUYW1pblJlc3RTZXJ2aWNlO1xyXG4gIHByaXZhdGUgX3NlY3VyaXR5U2VydmljZTogVGFtaW5TZWN1cml0eVNlcnZpY2U7XHJcbiAgcHJpdmF0ZSBfcGVyc2lhbkRhdGVUaW1lOiBQZXJzaWFuRGF0ZVRpbWVQaXBlO1xyXG4gIHByaXZhdGUgX3BlcnNpYW5OdW1iZXJQaXBlOiBQZXJzaWFuTnVtYmVyUGlwZTtcclxuICBwcml2YXRlIF9yb3V0ZXI6IFJvdXRlcjtcclxuICBwcml2YXRlIF9jb25zdGFudHM6IENvbnN0YW50c1NlcnZpY2U7XHJcbiAgcHJpdmF0ZSBfZm9ybUJ1aWxkZXI6IEZvcm1CdWlsZGVyO1xyXG4gIHByaXZhdGUgX2hvc3Q6IEVsZW1lbnRSZWY7XHJcbiAgcHJpdmF0ZSBfY2hhbmdlRGV0ZWN0b3JSZWY6IENoYW5nZURldGVjdG9yUmVmO1xyXG4gIEBJbnB1dCgpIGlzTW9kYWwgPSBmYWxzZTtcclxuXHJcbiAgQElucHV0KCkgc2V0IHZpc2libGUodmFsOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLl9ob3N0Lm5hdGl2ZUVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IHZhbCA/ICdibG9jaycgOiAnbm9uZSc7XHJcbiAgfVxyXG5cclxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGluamVjdG9yOiBJbmplY3Rvcikge1xyXG4gICAgdGhpcy5fb3ZlcmxheVNlcnZpY2UgPSBpbmplY3Rvci5nZXQoT3ZlcmxheVNlcnZpY2UpO1xyXG4gICAgdGhpcy5fcmVzdFNlcnZpY2UgPSBpbmplY3Rvci5nZXQoVGFtaW5SZXN0U2VydmljZSk7XHJcbiAgICB0aGlzLl9zZWN1cml0eVNlcnZpY2UgPSBpbmplY3Rvci5nZXQoVGFtaW5TZWN1cml0eVNlcnZpY2UpO1xyXG4gICAgdGhpcy5fcGVyc2lhbkRhdGVUaW1lID0gaW5qZWN0b3IuZ2V0KFBlcnNpYW5EYXRlVGltZVBpcGUpO1xyXG4gICAgdGhpcy5fcGVyc2lhbk51bWJlclBpcGUgPSBpbmplY3Rvci5nZXQoUGVyc2lhbk51bWJlclBpcGUpO1xyXG4gICAgdGhpcy5fcm91dGVyID0gaW5qZWN0b3IuZ2V0KFJvdXRlcik7XHJcbiAgICB0aGlzLl9mb3JtQnVpbGRlciA9IGluamVjdG9yLmdldChGb3JtQnVpbGRlcik7XHJcbiAgICB0aGlzLl9ob3N0ID0gaW5qZWN0b3IuZ2V0KEVsZW1lbnRSZWYpO1xyXG4gICAgdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYgPSBpbmplY3Rvci5nZXQoQ2hhbmdlRGV0ZWN0b3JSZWYpO1xyXG4gICAgdGhpcy5fY29uc3RhbnRzID0gaW5qZWN0b3IuZ2V0KENvbnN0YW50c1NlcnZpY2UpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkluaXQoKSB7XHJcbiAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XHJcbiAgICB0aGlzLmludGVybmFsSW5pdGlhbGl6ZSgpO1xyXG4gICAgdGhpcy5pbml0aWFsaXplUGFnZSgpO1xyXG4gIH1cclxuXHJcbiAgc2V0IHRpdGxlKHZhbDogc3RyaW5nKSB7XHJcbiAgICB0aGlzLl90aXRsZSA9IHZhbDtcclxuICAgIGRvY3VtZW50LnRpdGxlID0gJ9iz2KfYstmF2KfZhiDYqtin2YXbjNmGINin2KzYqtmF2KfYuduMJyArICcgLSAnICsgdGhpcy5fdGl0bGU7XHJcbiAgfVxyXG5cclxuICBnZXQgdGl0bGUoKTogc3RyaW5nIHtcclxuICAgIHJldHVybiB0aGlzLl90aXRsZTtcclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xyXG4gICAgdGhpcy5vdmVybGF5cy5mb3JFYWNoKChpdGVtOiBhbnkpID0+IHtcclxuICAgICAgdGhpcy5fb3ZlcmxheVNlcnZpY2UuaGlkZShpdGVtLm92ZXJsYXkpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmRlc3Ryb3lQYWdlKCk7XHJcbiAgICBhbGVydGlmeS5jbG9zZUFsbCgpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHJlc3RTZXJ2aWNlKCk6IFRhbWluUmVzdFNlcnZpY2Uge1xyXG4gICAgcmV0dXJuIHRoaXMuX3Jlc3RTZXJ2aWNlO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGNvbnN0YW50cygpOiBDb25zdGFudHNTZXJ2aWNlIHtcclxuICAgIHJldHVybiB0aGlzLl9jb25zdGFudHM7XHJcbiAgfVxyXG5cclxuICBnZXQgZm9ybUJ1aWxkZXIoKTogRm9ybUJ1aWxkZXIge1xyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1CdWlsZGVyO1xyXG4gIH1cclxuXHJcbiAgLy8gZ2V0IGN1cnJlbnRVc2VyKCk6IGFueSB7XHJcbiAgLy8gICByZXR1cm4gdGhpcy5fc2VjdXJpdHlTZXJ2aWNlLmN1cnJlbnRVc2VyO1xyXG4gIC8vIH1cclxuXHJcbiAgZ2V0IGNoYW5nZURldGVjdG9yUmVmKCk6IENoYW5nZURldGVjdG9yUmVmIHtcclxuICAgIHJldHVybiB0aGlzLl9jaGFuZ2VEZXRlY3RvclJlZjtcclxuICB9XHJcblxyXG4gIGdldCBzZWN1cml0eVNlcnZpY2UoKTogVGFtaW5TZWN1cml0eVNlcnZpY2Uge1xyXG4gICAgcmV0dXJuIHRoaXMuX3NlY3VyaXR5U2VydmljZTtcclxuICB9XHJcblxyXG4gIGdldFBlcnNpYW5EYXRlKGRhdGU6IGFueSk6IHN0cmluZyB7XHJcbiAgICB0cnkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fcGVyc2lhbkRhdGVUaW1lLnRyYW5zZm9ybShuZXcgRGF0ZShkYXRlKSk7XHJcbiAgICB9IGNhdGNoIHtcclxuICAgICAgcmV0dXJuICfYqtin2LHbjNiuINmG2KfYr9ix2LPYqic7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZWRpcmVjdFRvKHBhdGgpIHtcclxuICAgIHRoaXMuX3JvdXRlci5uYXZpZ2F0ZShbcGF0aF0pO1xyXG4gIH1cclxuXHJcbiAgc2hvd0luZm9NZXNzYWdlQm94KHRpdGxlOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uID0gbnVsbCkge1xyXG4gICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgIGFsZXJ0aWZ5LmFsZXJ0KHRpdGxlLCBtZXNzYWdlLCBjYWxsYmFjayk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhbGVydGlmeS5hbGVydCh0aXRsZSwgbWVzc2FnZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzaG93RXJyb3JNZXNzYWdlQm94KHRpdGxlOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uID0gbnVsbCkge1xyXG4gICAgY29uc3QgdGhlVGl0bGUgPSBgPHNwYW4gc3R5bGU9XCJjb2xvcjogcmVkXCI+JHt0aXRsZX08L3NwYW4+YDtcclxuICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICBhbGVydGlmeS5hbGVydCh0aGVUaXRsZSwgbWVzc2FnZSwgY2FsbGJhY2spO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYWxlcnRpZnkuYWxlcnQodGhlVGl0bGUsIG1lc3NhZ2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2hvd1F1ZXN0aW9uQm94KHRpdGxlOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgeWVzQ2FsbGJhY2s6IEZ1bmN0aW9uLCBub0NhbGxiYWNrOiBGdW5jdGlvbikge1xyXG4gICAgYWxlcnRpZnkuY29uZmlybSh0aXRsZSwgbWVzc2FnZSwgeWVzQ2FsbGJhY2ssIG5vQ2FsbGJhY2spXHJcbiAgICAgIC5zZXQoe1xyXG4gICAgICAgIGxhYmVsczoge29rOiAn2KjZhNuMJywgY2FuY2VsOiAn2K7bjNixJ31cclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBzaG93UmV0cnlCb3godGl0bGU6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCByZXRyeUNhbGxiYWNrOiBGdW5jdGlvbiwgY2FuY2VsQ2FsbGJhY2s6IEZ1bmN0aW9uKSB7XHJcbiAgICBhbGVydGlmeS5jb25maXJtKHRpdGxlLCBtZXNzYWdlLCByZXRyeUNhbGxiYWNrLCBjYW5jZWxDYWxsYmFjaylcclxuICAgICAgLnNldCh7XHJcbiAgICAgICAgbGFiZWxzOiB7b2s6ICfYqtmE2KfYtCDZhdis2K/YrycsIGNhbmNlbDogJ9in2YbYtdix2KfZgSd9LFxyXG4gICAgICAgICdjbG9zYWJsZSc6IGZhbHNlXHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZ2V0UGVyc2lhbk51bWJlcihzdHI6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5fcGVyc2lhbk51bWJlclBpcGUudHJhbnNmb3JtKHN0cik7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgaW5pdGlhbGl6ZVBhZ2UoKSB7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgZGVzdHJveVBhZ2UoKSB7XHJcbiAgfVxyXG5cclxuICBzaG93T3ZlcmxheShlbGVtZW50OiBhbnkgPSBudWxsKTogc3RyaW5nIHtcclxuICAgIGlmICh0aGlzLm92ZXJsYXlzLmZpbmRJbmRleChjID0+IGMub3ZlcmxheSA9PT0gZWxlbWVudCkgPj0gMCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBvdmVybGF5ID0gdGhpcy5fb3ZlcmxheVNlcnZpY2Uuc2hvdyhlbGVtZW50KTtcclxuICAgIGNvbnN0IGlkID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcclxuICAgIHRoaXMub3ZlcmxheXMucHVzaCh7XHJcbiAgICAgIG92ZXJsYXk6IG92ZXJsYXksXHJcbiAgICAgIGlkOiBpZC50b1N0cmluZygpXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpZC50b1N0cmluZygpO1xyXG4gIH1cclxuXHJcbiAgc2hvd092ZXJsYXlXaXRoTWVzc2FnZShtZXNzYWdlOiBzdHJpbmcsIGVsZW1lbnQ6IGFueSA9IG51bGwpOiBzdHJpbmcge1xyXG4gICAgaWYgKHRoaXMub3ZlcmxheXMuZmluZEluZGV4KGMgPT4gYy5vdmVybGF5ID09PSBlbGVtZW50KSA+PSAwKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IG92ZXJsYXkgPSB0aGlzLl9vdmVybGF5U2VydmljZS5zaG93TWVzc2FnZShtZXNzYWdlLCBlbGVtZW50KTtcclxuICAgIGNvbnN0IGlkID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcclxuICAgIHRoaXMub3ZlcmxheXMucHVzaCh7XHJcbiAgICAgIG92ZXJsYXk6IG92ZXJsYXksXHJcbiAgICAgIGlkOiBpZC50b1N0cmluZygpXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBpZC50b1N0cmluZygpO1xyXG4gIH1cclxuXHJcbiAgaGlkZU92ZXJsYXkoaWQ6IHN0cmluZykge1xyXG4gICAgY29uc3QgdG1wID0gdGhpcy5vdmVybGF5cy5maW5kKGMgPT4gYy5pZCA9PT0gaWQpO1xyXG4gICAgaWYgKHRtcCkge1xyXG4gICAgICB0aGlzLl9vdmVybGF5U2VydmljZS5oaWRlKHRtcC5vdmVybGF5KTtcclxuICAgIH1cclxuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5vdmVybGF5cy5maW5kSW5kZXgoYyA9PiBjLmlkID09PSBpZCk7XHJcbiAgICB0aGlzLm92ZXJsYXlzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGludGVybmFsSW5pdGlhbGl6ZSgpIHtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBsb2FkUGFnZURhdGEoKSB7XHJcbiAgfVxyXG5cclxuICBvblRvdXIoKSB7XHJcbiAgICBpbnRyb0pzKCkuc2V0T3B0aW9ucyhcclxuICAgICAge1xyXG4gICAgICAgICduZXh0TGFiZWwnOiAn2KjYudivJyxcclxuICAgICAgICAncHJldkxhYmVsJzogJ9mC2KjZhCcsXHJcbiAgICAgICAgJ3NraXBMYWJlbCc6ICfYrtix2YjYrCcsXHJcbiAgICAgICAgJ2RvbmVMYWJlbCc6ICfYp9iq2YXYp9mFJ1xyXG4gICAgICB9KS5zdGFydCgpO1xyXG4gIH1cclxuXHJcbiAgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmxvYWRQYWdlRGF0YSgpLCAwKTtcclxuICB9XHJcblxyXG4gIG9wZW5Nb2RhbCgpOiBhbnkge1xyXG4gIH1cclxuXHJcbiAgbWFya0Zvcm1Hcm91cEFzVG91Y2hlZChmb3JtOiBGb3JtR3JvdXApIHtcclxuICAgICg8YW55Pk9iamVjdCkudmFsdWVzKGZvcm0uY29udHJvbHMpLmZvckVhY2goY29udHJvbCA9PiBjb250cm9sLm1hcmtBc1RvdWNoZWQoKSk7XHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyQ29udGVudENoZWNrZWQoKTogdm9pZCB7XHJcbiAgICB0aGlzLl9jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgfVxyXG59XHJcbiJdfQ==